# Areas.wotw: defines logic paths for the wotw randomizer

# requirement macros. must go at the top of the file!
requirement Weapon:
  base: Sword OR Hammer

requirement EnemyObstacle:
  base: Sword OR Hammer OR Bash OR Launch

requirement ShieldEnemy:  # breaking the shield or shell of an enemy
  base: Hammer OR Launch OR Grenade=1 OR Spear

requirement Combat:
  base:
    Regenerate, Sword OR Hammer  # define danger when using this!
  advanced:
    Sword OR Hammer
    Launch

requirement RangedWeapon:
  base: Grenade=3 OR Bow OR Spear  # 3 should be enough for any use of this

requirement DepthsLight:  # currently irrelevant since defeating mora requires flash in base, just future proofing here
  base: UpperDepths.MoraDefeated OR Flash
  advanced: Bow

area MarshSpawn.Main:                  # (-798, -4310) spawn location / inkwater well
  state MarshSpawn.KeystoneDoor:
    base: Keystone=2
  state MarshSpawn.QuestCaveTokk:  # this accounts for taking the cave keystone, then going to tokk
    base: Weapon
  
  pickup MarshSpawn.RockHC: free
  pickup MarshSpawn.FirstPickupEX: free
  pickup MarshSpawn.PreLupoEX: free
  pickup MarshSpawn.LupoMap: free
  pickup MarshSpawn.GrappleHC:
    base:
      Grapple, DoubleJump OR Launch
    advanced:
      Grapple, Sword                   # An air combo is enough to get you from the ceiling plant into range of the lower hanging plant
      Grapple, Dash OR Glide
  pickup MarshSpawn.BridgeEX:
    base:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1                  # Grenade bash straight up from below
    advanced:
      free                             # lure and sword pogo off of hopping enemy
  pickup MarshSpawn.ResilienceShard:
    base: Weapon
  pickup MarshSpawn.ResilienceOre:
    base: Weapon, Water
  pickup MarshSpawn.BashEC:
    base: Bash OR Launch
  pickup MarshSpawn.LeverEC:
    base:
      Grapple, DoubleJump, Bash
      Launch, Bash
      Grapple, Launch
      Bash, Grenade=1, DoubleJump
    advanced:
      Launch                          # Single jump and a launch can reach the ledge offscreen.
      Bash                            # Lure the Jumper, then bash off him
  pickup MarshSpawn.LongSwimEX:
    base: Water
  pickup MarshSpawn.CaveKS:
    base: Weapon
  pickup MarshSpawn.LeftTokkEX:
    base: Weapon
  pickup MarshSpawn.FightRoomEX:
    base: Weapon
  pickup MarshSpawn.BurrowOre:
    base, EnemyObstacle:
      Water, Burrow, DoubleJump OR Glide OR Launch
      Water, Burrow, Dash, Bash, Grenade=1
  pickup MarshSpawn.LifepactShard:
    base, Combat, Danger=40:  # no region danger
      Water, Burrow, DoubleJump OR Launch
      Water, Burrow, Dash, Bash, Grenade=1
  pickup PoolsApproach.BurrowsPathEX:
    base:
      DoubleJump, Bash, Glide
      Bash, Launch

  conn MarshSpawn.PoolsBurrowsPath:
    base:
      Weapon, DoubleJump OR Dash OR Launch
      Weapon, Bash, Grenade=1
      Water, Burrow, DoubleJump OR Glide OR Launch
      Water, Burrow, Dash, Bash, Grenade=1
    advanced:
      Sword, Glide
  conn MarshSpawn.DenApproach:
    base: MarshSpawn.KeystoneDoor
  conn MarshPastOpher.MillView:
    base: Weapon
  conn PoolsApproach.LeftOfWheel:
    base:
      Water, DoubleJump, Bash, Glide
      Water, Bash, Launch

  # teleporter connections
  conn MidnightBurrows:
    base: BurrowsTP
  conn HowlsDen.Lower:
    base: DenTP
  conn EastHollow.Teleporter:
    base: HollowTP
  conn GladesTown.Teleporter:
    base: GladesTP
  conn InnerWellspring.Teleporter:
    base: WellspringTP
  conn WoodsEntry.Teleporter:
    base: WestWoodsTP
  conn WoodsMain.Teleporter:
    base: EastWoodsTP
  conn LowerReach.Teleporter:
    base: ReachTP
  conn UpperDepths.Teleporter:
    base: DepthsTP
  conn EastPools.TPArea:
    base: EastPoolsTP
  conn WestPools:
    base: WestPoolsTP
  conn LowerWastes.WestTP:
    base: WestWastesTP
  conn LowerWastes.EastTP:
    base: EastWastesTP
  conn UpperWastes.NorthTP:
    base: OuterRuinsTP
  conn WindtornRuins.RuinsTP:
    base: InnerRuinsTP
  conn WillowsEnd.InnerTP:
    base: WillowTP

area MarshSpawn.DenApproach:  # (-569, -4394) behind the door blocking regen tree
  pickup MarshSpawn.RegenTree: free
  pickup MarshSpawn.RecklessShard:
    base, Weapon:
      DoubleJump OR Dash OR Launch  # Dash somewhat on the border of base
      Bash, Grenade=1

  conn HowlsDen.Upper:
    base:
      DoubleJump OR Dash OR Launch  # Dash somewhat on the border of base
      Bash, Grenade=1
    advanced:
      Sword OR Hammer         # Use air combos to make it to wall above thorns

area MarshSpawn.PoolsBurrowsPath:  # (-887, -4435) the waypoint between pools, burrows and marsh
  state MarshSpawn.QuestCaveTokk: free  # this accounts for taking the cave keystone, then going to tokk
  state MidnightBurrows.TabletQI:
    base: Unreachable  # TEMPORARY - delete when quests have syntax
  state MarshSpawn.QuestBurrowsTokk:
    base: MidnightBurrows.TabletQI, Bash, DoubleJump OR Dash OR Launch
  
  pickup MarshSpawn.CaveOre:
    base:
      DoubleJump OR Launch
      Bash, Grenade=1
  pickup MarshSpawn.CaveKS: free  # all other pickups in the cave require a weapon; and with a weapon you can go around instead
  pickup MarshSpawn.BurrowOre:
    base, EnemyObstacle:
      Burrow, DoubleJump, Dash OR Glide
      Burrow, Launch
    advanced:
      Burrow, DoubleJump OR Dash
  pickup MarshSpawn.LifepactShard:
    base: Combat, Danger=40, DoubleJump, Burrow  # no region danger
  pickup MarshSpawn.BurrowsApproachLedgeEX:
    base: Bash, DoubleJump OR Launch
  pickup MarshSpawn.CrusherSwimEX:
    base: Water, WaterDash, Bash, DoubleJump OR Dash OR Launch
  pickup MidnightBurrows.DamageTree:
    base:
      Bash, DoubleJump, Glide
      Bash, Launch

  conn MidnightBurrows:
    base: Bash, DoubleJump OR Dash OR Launch

region MidnightBurrows:
  base:
    Danger=25 # kind of a no-op?

area MidnightBurrows:  # (-945, -4581) At the teleporter
  state MidnightBurrows.KeystoneDoor:
    base, Keystone=4:
      DoubleJump, Bash
      Launch
  state MidnightBurrows.Lever:
    base: DoubleJump, Bash

  pickup MidnightBurrows.LeftKS:
    base: 
      DoubleJump OR Dash OR Glide OR Launch
    advanced:
      Damage=15
  pickup MidnightBurrows.RightKS:
    base:
      MidnightBurrows.Lever, DoubleJump
      Launch
  pickup MidnightBurrows.UpperKS:
    base:
      MidnightBurrows.Lever, EnemyObstacle, DoubleJump, Glide
      MidnightBurrows.Lever, EnemyObstacle, DoubleJump, Dash, Danger=15
      Launch

  pickup MidnightBurrows.LowerKS:
    base:
      DoubleJump, Dash, Bash
      DoubleJump, Bash, Grenade=1
      Launch
  pickup MidnightBurrows.LupoMap:
    base:
      DoubleJump
      Bash, Grenade=1
      Launch
    advanced:
      Bash
  pickup MidnightBurrows.DeflectorShard:
    base:
      MidnightBurrows.Lever, DoubleJump, Dash
      Launch
    advanced: 
      MidnightBurrows.Lever, DoubleJump OR Dash
  pickup MidnightBurrows.TabletQI:
    base, MidnightBurrows.KeystoneDoor:
      DoubleJump, Bash
      Launch

area HowlsDen.Upper:  # (-390, -4413) Next to Mokk the Brave
  state HowlsDen.KeystoneDoor:
    base: Keystone=2
  state MarshSpawn.FangQI:
    base: Unreachable  # TEMPORARY - delete when quests have syntax
  state MarshSpawn.QuestMokkFang:
    base: MarshSpawn.FangQI
  
  pickup MarshSpawn.FangQI:
    base:
      DoubleJump OR Launch
      Bash, Dash                      # Bash off the enemy to get to the vine, then jump&dash right
    advanced:
      Bash, Damage=10                 # Bash off the enemy to get to the vine, then jump right. Dboost the last gap.
      Bash, Grenade                   # Bash off the enemy to get to the vine, then jump right. Bash+Grenade the last gap.
  pickup MarshSpawn.FangEC:
    base:
      DoubleJump, Dash                # Stick to the ceiling
      Launch
    advanced:
      Bash, Grenade=1, Dash           # Bash up off the enemy and Dash to the fang. Grenade+bash up from the fang
      Bash, Grenade=1, Sword          # As above, but sword upslash to cross the last gap
      Bash, Grenade=1, Damage=10      # As above, but take a dboost on the last gap
  pickup MarshSpawn.RecklessShard:
    base, Weapon:
      DoubleJump OR Launch
      Bash, Grenade=1
  pickup MarshSpawn.RegenTree:
    base:
      DoubleJump OR Launch
      Bash, Grenade=1
  pickup HowlsDen.SwordTree: free
  pickup HowlsDen.UpperEX: free
  pickup HowlsDen.MagnetShard:
    base: Weapon
  pickup HowlsDen.AboveTPEX:
    base: Weapon
  pickup HowlsDen.RightHC:
    base: Weapon
  pickup HowlsDen.BoneOre:
    base: Hammer
  pickup HowlsDen.LeftHC:
    base: HowlsDen.KeystoneDoor, Weapon, DoubleJump OR Dash OR Launch
  pickup HowlsDen.AboveDoorKS:
    base:
      DoubleJump OR Dash OR Launch
    advanced:
      Sword OR Hammer
      Bash, Grenade=1
      Glide

  conn HowlsDen.Lower:
    base: Weapon

area HowlsDen.Lower:  # (-328, -4535) At the teleporter
  pickup HowlsDen.AboveTPEX:
    base, Weapon:
      DoubleJump OR Launch
      Bash, Grenade=1
  pickup HowlsDen.CombatShrine:
    base: Combat, Danger=35, Hammer  # no region danger
  pickup HowlsDen.LaserKS:
    base:
      DoubleJump OR Dash OR Launch
      Bash, Grenade=1
    advanced:
      Sword OR Hammer         # Can reach lever with air combos
  # if someone manages to lower the platform, they'll manage to get over the gap as well. That's how it works in the base game, that's how it'll work here
  pickup HowlsDen.DoubleJumpTree:
    base: Weapon OR DoubleJump OR Dash OR Glide OR Launch
  pickup HowlsDen.DoubleJumpEX:
    base: Weapon OR Launch
    advanced:
      Bash                              # Bash off of rolling enemy
  pickup HowlsDen.StickyShard:
    base:
      DoubleJump OR Dash OR Launch
      Glide, Bash, Grenade=1
    advanced:
      Sword OR Hammer
      Bash, Grenade=1

area MarshPastOpher.MillView:  # (-594, -4292) Standing next to Opher, looking at the Millstone
  state MarshPastOpher.TrialActivation:
    base: Weapon, Grapple, Dash OR Glide OR Launch
  
  pickup MarshPastOpher.TrialOre:
    base: Weapon
  pickup MarshPastOpher.TrialLeftEX:
    base: Weapon, DoubleJump OR Glide OR Dash OR Launch
    advanced: Sword OR Hammer                 # Horizontal slash combo
  pickup MarshPastOpher.TrialEC:
    base: DoubleJump OR Dash OR Launch OR Glide
    advanced: Sword OR Hammer
  pickup MarshPastOpher.TrialHC:
    base: Hammer
    advanced: Weapon                        # Lure stomp
  pickup MarshPastOpher.TrialRightEX:
    base:
      Weapon, DoubleJump OR Bash OR Launch
    advanced: Sword                         # Pogo off of enemy
  pickup MarshPastOpher.CombatShrine:
    base: Combat, Danger=20  # no region danger
  pickup MarshPastOpher.SwingPoleEX:
    base:
      Danger=10, DoubleJump OR Dash OR Glide OR Launch
      Danger=10, Bash, Grenade=1
    advanced:
      Sword OR Hammer OR DoubleJump OR Dash OR Launch OR Bash OR Glide      #It's notably harder to get without taking a hit. Up and/or Side combos with sword or hammer can make it to the horizontal branch from the launch pad.

  conn MarshPastOpher.BowArea:
    base:
      DoubleJump OR Dash OR Launch
      Bash, Grenade=3
    advanced: Sword OR Hammer       # I specify this in case "Weapon" is changed because they are being used for movement, not breaking a barrier.

area MarshPastOpher.BowArea: # (-443, -4236)  Ledge to the left of the pit with bow tree.
  pickup MarshPastOpher.BowEC: free
  pickup MarshPastOpher.BowTree: free
  pickup WestHollow.CrusherHC: free
  pickup MarshPastOpher.LeftEyestone:
    base:
      Bow, DoubleJump OR Dash OR Launch
      Bow, Bash, Grenade=1
  pickup MarshPastOpher.RightEyestone:
    base:
      Bow, DoubleJump OR Dash OR Launch
      Bow, Bash, Grenade=1

  conn MarshPastOpher.MillView:
    base:
      DoubleJump OR Dash OR Launch
      Glide, Danger=10
      Bash, Grenade=1
  conn MarshPastOpher.PoolsPathEast:
    base:
      Bow, DoubleJump, Dash, Bash, Glide
      Bow, Bash, Launch
  conn WestHollow.HollowDrainUpper:
    base:
      DoubleJump, Bow OR Dash OR Glide
      Dash, Glide
      Launch
    advanced:
      Bash, Glide  # bashglide off a slime

# begin pools path needs validation area?
area MarshPastOpher.PoolsPathEast:  # (-649, -4243)  On the wood sticking out of the ledge at the top left of the large room with Opher
  pickup MarshPastOpher.CeilingEX:
    base:
      Bash, DoubleJump, Dash
      Launch
    advanced:
      Bash, Dash              # Pretty precise to do without damage
  pickup MarshPastOpher.PoolsPathEC:
    base: Bash, DoubleJump, Dash OR Launch
    advanced: Bash, Glide

  conn MarshPastOpher.PoolsPathWest:
    base:  # you're meant to Bash the enemies casually on this path, so it's required here as well. Breaking the floor with a projectile has been base in other locations. Might be worth discussing again at some point...
      Bash, DoubleJump OR Launch
      Bash, Grenade=1, Dash
      Bash, Grenade=2, Glide
    advanced:
      Hammer, Bash                    # Fairly precise air combos needed
      Hammer, Sword, Bash             # Fairly precise air combos needed
  conn MarshPastOpher.MillView: free

area MarshPastOpher.PoolsPathWest:  # (-802, -4186)  Right on top of MarshPastOpher.PoolsPathEX
  pickup MarshPastOpher.PoolsPathEX: free
  pickup MarshPastOpher.PoolsPathEC:
    base:
      DoubleJump, Bash, Dash OR Glide
      DoubleJump, Bash, Grenade=1  # maybe not obvious?
      Launch, DoubleJump OR Dash OR Bash OR Glide
  pickup PoolsApproach.MillPathHC:
    base, PoolsApproach.MarshWallBroken:
      Water, DoubleJump, Launch
      Water, WaterDash, DoubleJump, Dash
    advanced, PoolsApproach.MarshWallBroken:
      Water, WaterDash, Sword OR Hammer   # Air combos to reach wall jump
      Water, Launch

  conn MarshPastOpher.PoolsPathEast:
    base, Weapon:
      DoubleJump, Bash, Dash OR Glide OR Grenade=1
      Bash, Grenade=1, Dash, Glide
      Launch, Danger=10, DoubleJump OR Dash OR Glide
      Launch, Bash
  conn PoolsApproach.RightOfWheel:
    base, PoolsApproach.MarshWallBroken:
      Water, Grapple, DoubleJump OR Dash OR Launch
      Water, DoubleJump, Dash, Glide, Launch
    advanced: Water, Grapple, Sword OR Hammer
# end pools path needs validation area?

region WestHollow:
  base:
    Danger=20

area WestHollow.HollowDrainUpper:  # (-178, -4238) To the left of the purple eye door
  state WestHollow.UpperDrainLeverPulled:  # Lever that drains the first section of the hollow
    base:
      Bow, DoubleJump OR Danger=10  # easy to clip the spikes on the pole
      Dash, DoubleJump  # Makes you Dash past a falling slime
      Launch
    advanced:
      DoubleJump, Damage=10  # One damage boost on the spikes
  state WestHollow.LowerDrainLeverPulled:  # Lever that drains the second section of the hollow
    base, WestHollow.UpperDrainLeverPulled, EnemyObstacle: 
      Bow, DoubleJump OR Dash OR Launch
    advanced, WestHollow.UpperDrainLeverPulled:
      Bow, Bash, Grenade=1  # Involves bashing off a mosquito 
      Bow, Bash, Damage=20  # Involves bashing off a mosquito
  
  pickup WestHollow.CrusherHC:
    base:
      WestHollow.UpperDrainLeverPulled OR DoubleJump OR Dash OR Glide OR Launch OR Bow
      Bash, Grenade=1
    advanced:
      Damage=10 #dboost through poison water
  pickup WestHollow.FarLeftEX:
    base, WestHollow.LowerDrainLeverPulled: 
      DoubleJump OR Dash OR Launch
      Bash, Grenade=1
    advanced, WestHollow.LowerDrainLeverPulled:
      Bow, Bash, Grenade=2
  pickup WestHollow.RockPuzzleEX:
    base: WestHollow.LowerDrainLeverPulled
    advanced, WestHollow.UpperDrainLeverPulled: 
      Damage=100
  pickup WestHollow.HiddenEC:
    base, WestHollow.LowerDrainLeverPulled: 
      Weapon
  
  conn MarshPastOpher.BowArea:
    base:  # there's a dropping slime in the way here, not sure if damage on some paths might be a good thing?
      DoubleJump OR Launch
      Bash, Grenade=1, Dash OR Glide
  conn WestHollow.HollowDrainLower:
    base: WestHollow.LowerDrainLeverPulled
  conn EastHollow.Teleporter: free  # as long as the purple eye door starts open

area WestHollow.HollowDrainLower:  # (-209, -4333) Next to the jumppad left of Lupo
  state WestHollow.TrialActivation:
    base, EnemyObstacle:
      DoubleJump OR Dash OR Launch
      Bash, Grenade=1
  state WestHollow.DoorLever:  # The door blocking Dash area
    base, Weapon:
      DoubleJump OR Dash OR Launch
      Bash, Grenade=1
  
  pickup WestHollow.QuickshotShard:
    base: WestHollow.LowerDrainLeverPulled, EnemyObstacle, DoubleJump, Bow, Dash OR Launch  # middle water state can softlock this, so you have to be able to fully lower the water. DoubleJump is for lenience on the bowshot
  pickup WestHollow.SwimEC:
    base: Water
  pickup WestHollow.LupoMap:
    base:  # All the path options here include a way to get past the enemy
      DoubleJump, Dash
      Bash, Grenade=1
      Launch
  pickup WestHollow.TrialHC:
    base: WestHollow.LowerDrainLeverPulled, EnemyObstacle, DoubleJump OR Launch  # middle water state can softlock this, so you have to be able to fully lower the water. Other skill options would work, but between having to do an easy damage boost and making it harder to deal with the enemies it might not be fit for base
  pickup WestHollow.BelowLupoEX:
    base:  # All the path options here include a way to get past the enemy
      DoubleJump, Dash
      Launch
  
  # no backwards connection. If oob logic forces changes here, it'll need more than just the connection back anyway
  conn WestHollow.DashArea:
    base: WestHollow.DoorLever, EnemyObstacle OR DoubleJump

area WestHollow.DashArea:  # (-88, -4423) To the right of the lever door
  pickup WestHollow.DashTree: free
  pickup WestHollow.CrusherEX:
    base: Dash
    advanced: Launch
  pickup WestHollow.DashRightEX:
    base:
      DoubleJump, Dash
      Launch
  pickup WestHollow.AboveDashEX:
    base:  # there's some funny Bashgrenade paths here, but better no fun in base
      DoubleJump, Dash
      Launch
  
  conn WestHollow.HollowDrainLower:
    base, WestHollow.DoorLever, EnemyObstacle:
      DoubleJump, Dash
      DoubleJump, Bash, Grenade=2, Glide
      Bash, Grenade=3, DoubleJump OR Dash
      Launch

region EastHollow:
  base:
    Danger=20

area EastHollow.Teleporter:  # (-150, -4237) the teleporter
  state EastHollow.BeetleDefeated:
    base:
      Combat, Danger=15, Dash  # +20 region danger. Kinda tight, but that's literally what the base game throws you at. It isn't too difficult to avoid the beetle's attacks without Dash, but this is what the base game taught.
    advanced:
      Combat
  conn WestHollow.HollowDrainUpper: free  # as long as the purple eye door starts open TODO
  conn EastHollow.AboveBash:
    base: 
      EnemyObstacle, EastHollow.BeetleDefeated  # Didn't consider avoiding the beetle fight for base, so this connection should cover all paths going up

area EastHollow.AboveBash:  # (-9, -4232) At the breakable floor to Bash tree
  state EastHollow.QuestHandToHandMap:
    base, EastHollow.BeetleDefeated, EastHollow.Voice:
      Bash, DoubleJump OR Dash OR Glide
      DoubleJump, Dash, Glide
      Launch
  state EastHollow.BeetleDefeated:
    base:
      Combat, Danger=15, Dash  # +20 region danger. Kinda tight, but that's literally what the base game throws you at. It isn't too difficult to avoid the beetle's attacks without Dash, but this is what the base game taught.
  state EastHollow.MouldwoodLever:
    base: 
      Bash, DoubleJump OR Dash OR Glide OR Launch
  state GladesTown.EntryWallBroken:
    base: 
      Bash, DoubleJump OR Launch
  
  pickup EastHollow.GladesApproachOre:
    base: 
      EastHollow.BeetleDefeated, EastHollow.Voice, Bash, DoubleJump OR Dash OR Glide OR Launch
  pickup EastHollow.HornBeetleFightEX:
    base, EastHollow.BeetleDefeated:
      DoubleJump, Dash, Bash
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch
  pickup EastHollow.SpikeLanternEX:
    base: 
      DoubleJump, Bash  # there's a couple small awkward things adding up if you do this without Double Jump
  pickup EastHollow.SecretRoofEX:
    base:
      Bash OR Launch
      Grapple, DoubleJump, Dash OR Glide
  pickup EastHollow.MortarEX:
    base: Bash OR Launch  # Bash only needs some slight creativity, but there are many ways to solve it
  pickup EastHollow.BashEC:
    base: 
      Bash, DoubleJump, Dash
      Bash, Grenade=1
      Launch
  pickup EastHollow.BashTree:
    base:
      EnemyObstacle, DoubleJump OR Dash
      Glide OR Launch
  pickup EastHollow.BashEX:
    base: 
      DoubleJump, Bash
      Launch
  
  conn EastHollow.Teleporter:
    base, EastHollow.BeetleDefeated:
      DoubleJump, Dash
      Bash, DoubleJump OR Dash OR Grenade=1
      Glide OR Launch
  conn GladesTown.Teleporter:
    base: Bash, DoubleJump OR Launch
  conn EastHollow.AboveDepths:
    base: EastHollow.MouldwoodLever, EnemyObstacle, DoubleJump OR Dash OR Glide OR Launch
  conn EastHollow.Kwolok:
    base:
      Bash, DoubleJump OR Dash OR Glide OR Launch
      Launch, DoubleJump, Dash OR Glide
      Launch, Dash, Glide

area EastHollow.Kwolok:  # (154, -4205) Between Ku and Kwolok
  state EastHollow.Voice: free

  pickup EastHollow.RightKwolokEX:
    base: Bash OR Launch
  pickup EastHollow.SilentSwimEC:
    base: Water, WaterDash OR Launch
  pickup EastHollow.KwolokSwimOre:
    base: Water, Bash OR Danger=10  # enemy in the way
  pickup EastHollow.KwolokSwimLeftEX:
    base: Water, WaterDash OR Launch
  pickup EastHollow.KwolokSwimRightEX:
    base: Water
  
  conn EastHollow.AboveBash:
    base:  # since the ability culprit is right at the start, these should account for paths to the pickups on the way
      Bash, DoubleJump OR Dash OR Glide
      DoubleJump, Dash OR Glide
      Dash, Glide, Danger=10
      Launch
  conn WoodsEntry.ShriekMeet:
    base: 
      Water, Bash, Launch
      Water, Bash, Grapple, DoubleJump, Dash OR Glide
      Water, Bash, Grapple, Dash, Glide

area EastHollow.AboveDepths:  # (50, -4302) To the right of the lever door blocking Depths access
  pickup EastHollow.BashHC:
    base: Bash OR Launch
  pickup EastHollow.SplinterShard:
    base: Bash OR Launch  # Other abilities can get there, but these can also get you out again
  pickup EastHollow.DepthsExteriorEX:
    base: Glide, Launch  # ...what even is intended here?
  pickup EastHollow.BashTree:
    base: EastHollow.MouldwoodLever, EnemyObstacle
  pickup EastHollow.BashEX:
    base, EastHollow.MouldwoodLever: 
      DoubleJump, Bash
      Launch
  
  conn EastHollow.AboveBash:
    base, EastHollow.MouldwoodLever:
      DoubleJump, Bash
      Launch, DoubleJump OR Dash OR Bash OR Glide
  conn UpperDepths.Entry:  # area details to be determined, will probably stay true
    base: Glide

# begin glades needs-validation region
area GladesTown.Teleporter:  # (-306, -4153) The glades teleporter
  # silent woods map quest doesn't exactly make sense
  state GladesTown.QuestHandToHandPouch:
    base: EastHollow.QuestHandToHandMap
  state GladesTown.QuestHandToHandLantern:
    base: LowerReach.QuestHandToHandHat
  state GladesTown.AcornQI:
    base: Unreachable  # TEMPORARY - delete when quests have syntax
  state GladesTown.QuestAcorn:
    base: GladesTown.ClearThorns, GladesTown.AcornQI
  state GladesTown.QuestFatherKey:
    base: GladesTown.RoofsOverHeads
  state GladesTown.BuildHuts:
    base: Ore=15
  state GladesTown.RoofsOverHeads:
    base: GladesTown.BuildHuts, Ore=21
  state GladesTown.OnwardsAndUpwards:
    base: GladesTown.RoofsOverHeads, Ore=29
  state GladesTown.ClearThorns:
    base: Ore=23
  state GladesTown.CaveEntrance:
    base: GladesTown.ClearThorns, Ore=29
  # decoration not accounted for

  pickup GladesTown.AboveCaveEX:
    base: GladesTown.ClearThorns
  pickup GladesTown.CaveBurrowEX:
    base: GladesTown.ClearThorns, Burrow, DoubleJump OR Launch
  pickup GladesTown.AcornQI:
    base, GladesTown.ClearThorns, GladesTown.CaveEntrance, Flash:
        Water, Glide
        Water, DoubleJump, Dash
        Bash, Grenade=1
        Launch
    advanced: GladesTown.CaveEntrance, Flash, Water, Dash
  pickup GladesTown.UpdraftCeilingEX:
    base:
      Flap, Glide
      Bash, Grenade=1, DoubleJump
      Launch
      TuleyShop.QuestLightcatchers, Bash, Grenade=1
      TuleyShop.QuestBlueMoon, DoubleJump, Grapple
      TuleyShop.QuestBlueMoon, TuleyShop.QuestLightcatchers, Bash, Grapple
      TuleyShop.QuestSpringPlants, DoubleJump OR Dash OR Glide
      TuleyShop.QuestSpringPlants, TuleyShop.QuestLightcatchers, Bash
    advanced: Bash, Grenade=2
  pickup GladesTown.AboveTpEX:
    base:
      Launch  # probably base?
      TuleyShop.QuestLightcatchers, Bash:
        Grenade=1
        DoubleJump, Flap, Glide
        TuleyShop.QuestStickyGrass, Grapple
        TuleyShop.QuestBlueMoon, DoubleJump, Grapple
        TuleyShop.QuestSpringPlants, DoubleJump
    advanced:
      Bash, Grenade=2, Dash, DoubleJump
  pickup GladesTown.BountyShard:
    base:
      Launch  # probably base?
      TuleyShop.QuestLightcatchers, Bash:
        Grenade=1
        DoubleJump, Flap, Glide
        TuleyShop.QuestStickyGrass, Grapple
        TuleyShop.QuestBlueMoon, DoubleJump, Grapple
        TuleyShop.QuestSpringPlants, DoubleJump
    advanced:
      Bash, Grenade=3, Dash, DoubleJump
  pickup GladesTown.ArcingShard:
    base, GladesTown.ClearThorns:
      Bash, Grenade=1  # probably base?
      Launch
      TuleyShop.QuestLightcatchers, Bash, DoubleJump OR Dash OR Glide
  pickup GladesTown.LupoSoupEX:
    base: Water OR Burrow
  pickup GladesTown.LupoSwimHC:
    base: Water, Burrow
  pickup GladesTown.LupoSwimMiddleEX:
    base: Water, WaterDash OR Launch
  pickup GladesTown.LupoSwimLeftEX:
    base: GladesTown.ClearThorns, Water, WaterDash OR Launch
  pickup GladesTown.LowerOre:
    base:
      Hammer, DoubleJump OR Launch OR Dash OR Glide
      Hammer, Bash, Grenade=1
  pickup GladesTown.KeyMokiHutEX:
    base: GladesTown.RoofsOverHeads, WoodsEntry.DollQI
  pickup GladesTown.DamageTree:
    base: TuleyShop.QuestLastTree

  conn GladesTown.UpperWest:
    base:
      Launch, DoubleJump OR Dash OR Glide
      TuleyShop.QuestBlueMoon, Grapple:
        Bash, Grenade=1
        Launch
        TuleyShop.QuestLightcatchers, Bash, DoubleJump OR Dash OR Glide
  conn GladesTown.HoleHut:  # hard to tell what's redundant with ReachPath
    base:
      Flap, Glide, DoubleJump
      Flap, Glide, Bash, Grenade=1
      Launch
      TuleyShop.QuestLightcatchers, Bash:
        Grenade=2
        Grenade=1, DoubleJump
        DoubleJump, Grapple, TuleyShop.QuestStickyGrass OR TuleyShop.QuestBlueMoon
        Dash, Grenade=1, Grapple, TuleyShop.QuestStickyGrass OR TuleyShop.QuestBlueMoon
        TuleyShop.QuestSpringPlants
      TuleyShop.QuestSpringPlants, DoubleJump
      GladesTown.RoofsOverHeads:
        Bash, Grenade=3
        DoubleJump, Bash, Grenade=2
        TuleyShop.QuestBlueMoon, Grapple, Bash, Grenade=1, DoubleJump
        TuleyShop.QuestBlueMoon, Grapple, Bash, Grenade=2, Dash
        TuleyShop.QuestSpringPlants, Bash, Grenade=1
  conn GladesTown.ReachPath:
    base:
      Launch, DoubleJump OR Dash OR Glide  # Can go either to the right wall or through the semisolid branch
      Grapple, TuleyShop.QuestStickyGrass OR TuleyShop.QuestBlueMoon:
        Flap, Glide, DoubleJump OR Dash
        Launch
        TuleyShop.QuestLightcatchers, Bash:
          Flap, Glide
          DoubleJump OR Dash
          Grenade=1, DoubleJump OR Dash OR Glide
          TuleyShop.QuestSpringPlants, DoubleJump OR Dash OR Glide
        TuleyShop.QuestSpringPlants, DoubleJump
        GladesTown.RoofsOverHeads, Bash, Grenade=2, DoubleJump OR Dash
      TuleyShop.QuestLightcatchers, TuleyShop.QuestBlueMoon, Bash, Grapple:  # this is the only case where StickyGrass or BlueMoon makes a difference since you don't need DoubleJump OR Dash at the end
        Grenade=1
        TuleyShop.QuestSpringPlants

  conn GladesTown.West:
    base:
      DoubleJump OR Launch
      Bash, Grenade=1
      TuleyShop.QuestStickyGrass, Grapple
  conn TwillenShop: free
  conn OpherShop:
    base: Water, EastHollow.Voice  # what this actually needs is water + the ability to talk to kwolok
  conn TuleyShop: 
    base, Water:  # maybe probably?
      DoubleJump OR Launch
      Flap, Glide
      Bash, Grenade=1
# seed paths to TuleyShop tbd if ever necessary
# connection to hollow currently redundant with the wall in the way
area GladesTown.West:  # (-410, -4141) At Motay
  state GladesTown.QuestHandToHandCanteen:
    base: EastPools.QuestHandToHandSpyglass
  state GladesTown.QuestHandToHandLantern:
    base: LowerReach.QuestHandToHandHat

  pickup GladesTown.UpperOre:
    base:
      Bash, Grenade=1, Launch
      Launch, DoubleJump  # different ways to solve this, should be fine...
      TuleyShop.QuestStickyGrass:
        Grapple OR Launch
        Bash, Grenade=1, DoubleJump, Dash OR Glide
        Bash, Grenade=1, Dash, Glide
        TuleyShop.QuestLightcatchers, Bash, DoubleJump, Dash
        TuleyShop.QuestLightcatchers, Bash, Glide
      GladesTown.BuildHuts:
        DoubleJump, Bash, Grenade=2
        Bash, Grenade=3
        Launch
        TuleyShop.QuestStickyGrass:
          DoubleJump, Bash, Grenade=1
          TuleyShop.QuestLightcatchers, Bash, DoubleJump OR Dash OR Glide
        TuleyShop.QuestLightcatchers, Bash, Grenade=1
  pickup GladesTown.LowerOre:
    base:
      Hammer, DoubleJump OR Launch OR Dash OR Glide
      Hammer, Bash, Grenade=1
  pickup GladesTown.MotayHutEX:
    base, GladesTown.BuildHuts:
      DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch
      Grapple, TuleyShop.QuestStickyGrass OR TuleyShop.QuestBlueMoon
      TuleyShop.QuestLightcatchers, Bash
  pickup GladesTown.KeyMokiHutEX:
    base: GladesTown.RoofsOverHeads, WoodsEntry.DollQI

  conn TwillenShop:
    base: free
  conn WestGlades.Lower:
    base, EnemyObstacle:
      Bash, DoubleJump OR Dash
      DoubleJump, Dash, Glide  # this path is too nice to not be base... right?
      Launch
  conn GladesTown.Teleporter:
    base:
      GladesTown.ClearThorns OR DoubleJump OR Launch
      Bash, Grenade=1
      TuleyShop.QuestLightcatchers, Bash, Glide
      TuleyShop.QuestBlueMoon, Grapple
      GladesTown.BuildHuts, TuleyShop.QuestStickyGrass, Grapple, Glide
  conn GladesTown.UpperWest:
    base:
      TuleyShop.QuestStickyGrass, Launch
      TuleyShop.QuestLightcatchers, Bash:
        DoubleJump, Dash OR Glide
        Dash, Glide
        Launch
        TuleyShop.QuestStickyGrass, Grapple, DoubleJump OR Dash OR Glide
      TuleyShop.QuestBlueMoon, Grapple, DoubleJump OR Dash OR Glide OR Launch  # extra abilities because it's harder if the huts are there
      GladesTown.BuildHuts:
        Bash, Grenade=3  # need an extra grenade if the lightcatcher is there
        Bash, Grenade=1, DoubleJump, Dash OR Glide  # don't need an extra grenade because oyu can just do the lightcatcher path instead
        Launch
        TuleyShop.QuestLightcatchers, Bash, DoubleJump OR Dash OR Glide
  # all other paths should be redundant with the connection to tp

area GladesTown.UpperWest:  # (-357, -4126) Where Mokk lives
  pickup GladesTown.ArcingShard:
    base, GladesTown.ClearThorns:
      DoubleJump OR Dash OR Glide OR Launch
      TuleyShop.QuestLightcatchers, Bash  # somehow I don't think this path is very relevant
      TuleyShop.QuestBlueMoon, Grapple
  pickup GladesTown.BraveMokiHutEX:
    base: GladesTown.OnwardsAndUpwards, DoubleJump OR Launch
  pickup GladesTown.UpperLeftEX:
    base:
      Bash, Grenade=1
      Launch
      DoubleJump, Grapple, TuleyShop.QuestStickyGrass OR TuleyShop.QuestBlueMoon
  pickup GladesTown.AboveGromHC:
    base:
      DoubleJump, Bash, Grenade=1
      Launch
      Grapple, TuleyShop.QuestStickyGrass OR TuleyShop.QuestBlueMoon
  # no reason for backwards connections

area GladesTown.HoleHut:  # (-214, -4111) The ledge below Hole Hut
  pickup GladesTown.BelowHoleHutEX: free
  pickup GladesTown.HoleHutEX:
    base, GladesTown.RoofsOverHeads:
      TuleyShop.QuestSpringPlants OR DoubleJump OR Dash OR Launch
      Bash, Grenade=1
  pickup GladesTown.HoleHutEC:
    base, GladesTown.RoofsOverHeads:
      TuleyShop.QuestSpringPlants OR DoubleJump OR Dash OR Launch
      Bash, Grenade=1
  # no reason for backwards connections

area GladesTown.ReachPath:  # (-176, -4100) At the soup
  state GladesTown.QuestHandToHandSoup:
    base: InnerWellspring.QuestHandToHandHerbs

  pickup GladesTown.LeafPileEX:
    base: Flap
  pickup LowerReach.CatalystShard:
    base:
      Water, Bash, Flap  # seems to be a casual strat the game suggests you to do
      Water, Grenade=1
  pickup GladesTown.UpdraftCeilingEX:
    base:  # other (non-redundant) paths exist, but these have free retries, otherwise you'd have to go through entire reach to get another attempt
      DoubleJump
      TuleyShop.QuestLightcatchers, Bash
  
  conn GladesTown.HoleHut:
    base:  # free if you know the whole branch is semisolid, but you probably don't as a base player
      TuleyShop.QuestSpringPlants OR DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1
  conn GladesTown.Teleporter: free
  conn TuleyShop: 
    base: Water  # maybe probably?
  conn LowerReach.Trial:
    base:
      Glide, Bash, Flap OR Grenade=1  # derived from the catalyst path
      Glide, Launch

region WestGlades:
  base:
    Danger=20

area WestGlades.Lower:  # (-545, -4113) The right edge of the first pool past glades
  pickup WestGlades.GrappleEX:
    base:
      Grapple OR Launch
      Bash, Grenade=1
  pickup WestGlades.AbovePlantEX:
    base:
      Bash, DoubleJump, Dash OR Glide
      Bash, Dash, Glide
      Water, Bash
      Launch
  pickup WestGlades.LowerPoolEX:
    base: Water
  pickup WestGlades.SwimEC:
    base: Water
  pickup WestGlades.LeftOre:
    base:
      Grapple, Bash, DoubleJump, Dash OR Glide
      Grapple, Bash, Dash, Glide
      Grapple, Launch
      EnemyObstacle, Grapple, DoubleJump, Dash OR Glide
      Water, Grapple, DoubleJump
      Water, Grapple, WaterDash, Dash OR Glide

  conn WestGlades.Upper:
    base:
      DoubleJump, Bash, Water OR Dash OR Glide OR Grenade=1
      Launch
  conn GladesTown.West:
    base:
      Bash, DoubleJump OR Dash OR Glide
      DoubleJump, Dash, Glide
      Launch

area WestGlades.Upper:  # (-628, -4056) At the waypoint
  state LowerReach.BearSneezed:
    base: Flap

  pickup WestGlades.LeftOre:
    base: Grapple, DoubleJump OR Dash OR Glide OR Launch
  pickup WestGlades.UpperPoolEX:
    base: Water
  pickup WestGlades.RightOre:
    base:
      Bash, DoubleJump OR Dash
      Glide, DoubleJump OR Dash
      DoubleJump, Dash
      Launch

  conn WestGlades.Lower:
    base:
      EnemyObstacle, DoubleJump OR Dash OR Glide OR Launch
      Water, DoubleJump OR Dash OR Bash OR Glide OR Launch OR Danger=10
  conn LowerReach.Entry:
    base: LowerReach.BearSneezed
  conn WestGlades.MillApproach:
    base:
      Grapple, DoubleJump OR Dash OR Glide
      Bash
      Water, WaterDash
      Launch

area WestGlades.MillApproach:  # (-712, -4067) At the ledge of the room opening up to Wellspring
  pickup WestGlades.CombatShrine:
    base, Combat, Danger=35:  # +20 region danger
      Grapple, Bash, DoubleJump OR Glide
      DoubleJump, Bash, Grenade=1
      Launch, DoubleJump OR Grapple
  pickup WestGlades.ShrineHC:
    base:
      Grapple, DoubleJump, Dash OR Glide
      DoubleJump, Bash, Grenade=2
      Launch, DoubleJump OR Grapple

  conn WestGlades.Upper:
    base:
      Bash, DoubleJump OR Dash OR Glide OR Grenade=1
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Dash, Glide
      Launch
  conn OuterWellspring.EntranceDoor:
    base:
      DoubleJump, Grapple
      DoubleJump, Dash OR Glide
      Dash, Glide
      Launch
      Water
  conn PoolsApproach.RightOfWheel: # this makes more sense here than at OuterWellspring
    base, EnemyObstacle, Danger=20:  # bashing to break the wall on the way is much harder than just swimming at it and letting it happen, so didn't make Bash a requirement. Danger just because it's basically impossible not to run into the enemies.
      Water, DoubleJump, Dash, Grapple, Glide
      Water, WaterDash, Grapple, DoubleJump OR Dash OR Glide
      Water, Launch, Grapple
      Water, Launch, DoubleJump, Dash
# end glades needs-validation region

region OuterWellspring:
  base:
    Danger=25

area OuterWellspring.EntranceDoor:  # (-856, -4057) Outside the door where you enter the first room
  # ommited a lot of paths and most bashgrenade paths because of how complex this place is to navigate
  state OuterWellspring.EntranceDoorOpen:
    base, Weapon:
      DoubleJump, Dash OR Glide
      Dash, Glide
      Grapple, Bash, DoubleJump OR Dash
      Grapple, Glide
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch
  state OuterWellspring.WestDoorBlueMoonFree:
    base, Weapon:
      Grapple, DoubleJump, Dash
      Grapple, Glide OR Launch

  pickup OuterWellspring.RightWallOre:
    base:
      Grapple, DoubleJump OR Glide OR Launch
      Bash, Grenade=1, Launch
  pickup OuterWellspring.EntranceRoofEX:
    base:
      DoubleJump, Grapple, Dash OR Glide
      Grapple, Launch
      OuterWellspring.LeftWallWheelFree, DoubleJump, Launch, Dash OR Glide
  pickup OuterWellspring.WheelEX:
    base: OuterWellspring.EntranceDoorOpen
  pickup OuterWellspring.BasementEC:
    base:
      Water, DoubleJump, Dash OR Glide
      Water, Dash, Glide
      Water, Grapple, Bash, DoubleJump OR Dash
      Water, Grapple, Glide
      Water, Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Water, Launch
      OuterWellspring.EntranceDoorOpen  # casual strat I guess?
    advanced:
      Glide, Dash, Bash, Damage=20  # in advanced due to a single tick of poison water damage needed
      DoubleJump, Bash, Damage=20  # also only one tick of water damage! 
  pickup OuterWellspring.LifeHarvestShard:
    base, Weapon:
      DoubleJump, Bash
      Launch
    advanced, Weapon:
      # SentryJump
      Bash, Grenade=1  # this would be in Base if the camera didn’t put ori right at the top of the screen, making it hard to aim/catch the grenade
  pickup OuterWellspring.SwimEX:
    base: Water
  pickup OuterWellspring.SwimOre:
    base: Water, Grapple OR WaterDash OR Launch
    advanced:
      Water, Bash, Grenade=1  # you can stand on the spinny wheel and bash-grenade this
      # Water, DoubleJump, TripleJump  # how do you write triplejump paths
      # Water, SentryJump

  conn InnerWellspring.EntranceDoor:
    base: OuterWellspring.EntranceDoorOpen
  conn OuterWellspring.WestDoor:
    base:
      Grapple, DoubleJump, Dash
      Grapple, Glide OR Launch
      # connections using the left wall wheel would be pointless
  # east door is more demanding than west door, it didn't need any paths from here in base
  conn WestGlades.MillApproach:
    base:
      DoubleJump, Dash
      Bash, Grenade=2, DoubleJump OR Dash OR Glide
      Launch
      Water

area OuterWellspring.WestDoor:  # (-892, -3991) Outside the door where you exit the first room
  state OuterWellspring.LeftWallWheelFree:
    base: Weapon, DoubleJump OR Dash OR Glide OR Launch
  state OuterWellspring.WestDoorBlueMoonFree:
    base: Weapon, Launch, DoubleJump OR Dash OR Glide

  pickup OuterWellspring.HiddenHC:
    base:
      OuterWellspring.WestDoorBlueMoonFree, Grapple, DoubleJump, Dash OR Glide
      OuterWellspring.WestDoorBlueMoonFree, Grapple, Dash, Glide
  pickup OuterWellspring.EntranceRoofEX:
    base: DoubleJump, Launch, Dash OR Glide

  conn InnerWellspring.WestDoor:
    base: InnerWellspring.MiddleDoorsOpen
  conn OuterWellspring.EastDoor:
    base:
      Grapple, DoubleJump, Dash OR Glide
      Launch, DoubleJump OR Dash OR Glide
      Launch, Grapple
  conn OuterWellspring.EntranceDoor: free

area OuterWellspring.EastDoor:  # (-814, -3972) Outside the door leading to the spin puzzle
  state OuterWellspring.QuestCompass:
    base: InnerWellspring.QuestNeedleItem
  state OuterWellspring.WestDoorBlueMoonFree:
    base, Weapon:
      Grapple, InnerWellspring.TopDoorOpen OR DoubleJump OR Dash OR Glide
      Grapple, Bash, Grenade=1
      Launch

  pickup OuterWellspring.RightWallOre:
    base: DoubleJump OR Dash OR Glide OR Grapple OR Launch
  pickup OuterWellspring.RightWallEC:
    base, Weapon:
      DoubleJump, Dash
      Glide OR Launch
      Grapple, DoubleJump OR Dash
  pickup OuterWellspring.RightWallEX:
    base:
      DoubleJump, Grapple, Dash OR Glide
      DoubleJump, Bash, Grenade=1, Grapple
      Launch
  pickup OuterWellspring.TrialOre:
    base:
      Grapple, DoubleJump
      Launch

  conn InnerWellspring.EastDoor:
    base: InnerWellspring.MiddleDoorsOpen
  conn OuterWellspring.TopDoor:
    base:
      InnerWellspring.TopDoorOpen, Grapple OR Launch
      Bash, Grenade=1, Launch
  conn OuterWellspring.WestDoor:
    base:
      DoubleJump OR Dash OR Launch
      InnerWellspring.TopDoorOpen, OuterWellspring.WestDoorBlueMoonFree, Grapple
  conn OuterWellspring.EntranceDoor: free
  conn WestGlades.MillApproach: 
    base: Grapple OR Glide OR Launch

area OuterWellspring.TopDoor:  # (-836, -3927) Outside the door leading to the teleporter
  state OuterWellspring.TrialActivation:
    base:
      EnemyObstacle, DoubleJump, Grapple, Dash OR Glide
      DoubleJump, Grapple, Bash, Grenade=1
      Bash, Grenade=2
      Launch

  pickup OuterWellspring.UltraGrappleShard:
    base:
      EnemyObstacle, DoubleJump, Grapple, Dash OR Glide
      Bash, Grenade=1
      Launch
  pickup OuterWellspring.HiddenHC:
    base, EnemyObstacle:
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Launch, DoubleJump OR Dash OR Grapple OR Glide
  
  conn InnerWellspring.Teleporter:
    base: InnerWellspring.TopDoorOpen
  conn OuterWellspring.EastDoor: free
  conn OuterWellspring.WestDoor:
    base: EnemyObstacle, DoubleJump OR Dash OR Grapple OR Glide OR Launch

region InnerWellspring:
  base:
    Danger=25

area InnerWellspring.EntranceDoor:  # (-1294, -3953) Inside the door where you enter the first room
  state InnerWellspring.ShortCutWheel:
    base:
      Grapple, DoubleJump OR Dash OR Glide
      Launch

  pickup InnerWellspring.ThornShard:
    base:
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1
      Launch
      Weapon, DoubleJump OR Dash OR Glide  # break the three wheels free
  pickup InnerWellspring.ThornEX:
    base:
      Grapple, DoubleJump, Dash OR Glide
      Launch
  pickup InnerWellspring.ThreeWheelsEX:
    base:
      Bash, Grenade=1
      Launch
      Weapon  # break the three wheels free
  pickup InnerWellspring.WaterSwitchEX:
    base: Water, WaterDash
  pickup InnerWellspring.DrainHC:
    base, InnerWellspring.DrainLever:
      DoubleJump OR Grapple OR Launch  # bit of a weird pickup
      Water, Dash OR Glide
      Water, Bash, Grenade=1
  pickup InnerWellspring.DrainEX:
    base, InnerWellspring.DrainLever:  # the skeetos just want to be bashed here
      DoubleJump, Water OR Bash
      Water, Bash, Grenade=3
      Water, Bash, Grenade=2, Dash OR Glide
      Water, Dash, Bash, Grenade=1
      Weapon, DoubleJump, Dash, Glide
      Launch
  pickup InnerWellspring.LaserOre:
    base:
      Weapon, DoubleJump, Dash
      Weapon, DoubleJump, Glide
      EnemyObstacle, Grapple, DoubleJump, Dash
      EnemyObstacle, Grapple, Glide
      Launch

  conn OuterWellspring.EntranceDoor: free
  conn InnerWellspring.BelowDrainLever:
    base:
      Weapon, DoubleJump, Dash OR Glide
      Weapon, Grapple, DoubleJump OR Dash OR Glide
      Grapple, DoubleJump, Dash OR Glide
      Launch
  conn InnerWellspring.WestDoor:
    base:  # this in combination with the ShortCutWheel state accounts for all paths to the EX in the wheel
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Launch

area InnerWellspring.BelowDrainLever:  # (-1148, -3895) In the first room below the drain lever
  state InnerWellspring.UpperCorruption:  # the fourth corruption you see on your way
    base, Weapon:
      DoubleJump, Dash OR Glide
      Launch
  state InnerWellspring.DrainLever:
    base:
      Bash, Grenade=1  # not softlockable: UpperCorruption solves this
      InnerWellspring.UpperCorruption OR Launch

  pickup InnerWellspring.LaserOre:
    base, EnemyObstacle:
      DoubleJump, Dash
      Glide OR Launch
  pickup InnerWellspring.LeverEC:
    base:
      Bash, Grenade=2  # not softlockable: UpperCorruption solves this
      Bash, Grenade=1, Grapple, DoubleJump OR Dash OR Glide  # not softlockable: UpperCorruption solves this
      Launch
      InnerWellspring.UpperCorruption, Bash, Grenade=1
      InnerWellspring.UpperCorruption, Grapple, DoubleJump OR Dash OR Glide
  pickup InnerWellspring.LupoEX:
    base:
      DoubleJump, Dash OR Glide
      Launch

  conn InnerWellspring.WestDoor:
    base:
      DoubleJump, Bash, Grenade=1
      Launch
      InnerWellspring.UpperCorruption
  conn InnerWellspring.EntranceDoor:
    base:
      DoubleJump, Dash
      Grapple OR Glide OR Launch

area InnerWellspring.WestDoor:  # (-1251, -3889) Inside the door where you exit the first room
  state InnerWellspring.MiddleDoorsOpen:
    base:
      Grapple
      Bash, Grenade=1, Launch

  pickup InnerWellspring.ShortcutWheelEX:
    base: InnerWellspring.ShortCutWheel
  pickup InnerWellspring.LupoMap:
    base:
      Grapple, DoubleJump OR Dash OR Glide
      Bash, Grenade=1
      InnerWellspring.UpperCorruption
  pickup InnerWellspring.GrappleTreeEX:
    base:
      DoubleJump, Grapple
      Bash, Grenade=2
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Launch
  pickup InnerWellspring.GrappleTree:
    base:
      DoubleJump OR Dash OR Glide OR Grapple OR Launch
      Bash, Grenade=1

  conn OuterWellspring.WestDoor:
    base: InnerWellspring.MiddleDoorsOpen
  conn InnerWellspring.BelowDrainLever: free

area InnerWellspring.EastDoor:  # (-1180, -3732) Inside the door leading to the spin puzzle
  state InnerWellspring.QuestHandToHandHerbs:
    base: GladesTown.QuestHandToHandPouch
  state InnerWellspring.SpinArena:  # finishing the arena and destroying the corruption that open the door to spin puzzle
    base: Combat, DoubleJump OR Dash OR Glide OR Launch  # +25 region danger
  state InnerWellspring.SpinPuzzleSolved:  # to prevent softlocks the pickups in the spin puzzle room unlock only after completing it
    base, InnerWellspring.SpinArena:
      Grapple, DoubleJump OR Dash
      Grapple, Bash, Grenade=1
      Launch
      Water, DoubleJump, Dash OR Glide
  state InnerWellspring.TopDoorOpen:
    base, InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved, Weapon:
      Grapple, DoubleJump, Dash OR Glide
      Grapple, Dash, Glide
      Grapple, Launch

  state InnerWellspring.QuestNeedleItem:
    base:
      InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved, InnerWellspring.TopDoorOpen, Grapple, Dash, Glide
      InnerWellspring.TopDoorOpen, Grapple, DoubleJump OR Launch
      InnerWellspring.TopDoorOpen, DoubleJump, Bash, Grenade=1
      InnerWellspring.TopDoorOpen, Launch, DoubleJump
  pickup InnerWellspring.NeedleQI:
    base: InnerWellspring.QuestNeedleItem  # TEMPORARY - delete when quests have syntax
  
  pickup InnerWellspring.AboveSpinArenaEX:
    base:
      Grapple, DoubleJump OR Dash
      Launch
  pickup InnerWellspring.RotateRoomEX:
    base: InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved
  pickup InnerWellspring.RotateRoomOre:
    base: InnerWellspring.SpinArena, InnerWellspring.SpinPuzzleSolved
  # no reason for backwards connections

area InnerWellspring.Teleporter:  # (-1308, -3674) At the teleporter
  state InnerWellspring.WaterEscape:
    base:
      Bash, Grapple, DoubleJump, Dash OR Glide
      Bash, Grapple, Dash, Glide
      Grapple, Launch

  state InnerWellspring.QuestBlueMoonSeed:
    base:
      DoubleJump, Dash
      Bash, Grenade=1
      Launch
  pickup InnerWellspring.SeedQI:
    base: InnerWellspring.QuestBlueMoonSeed  # TEMPORARY - delete when quests have syntax

  pickup InnerWellspring.LibraryEX: free
  pickup InnerWellspring.AboveTpEX:
    base:
      DoubleJump, Dash OR Glide
      Bash, Grenade=1
      Launch
  pickup InnerWellspring.SwimOre:
    base: Water
  pickup InnerWellspring.EscapeRevisitEX:
    base, InnerWellspring.WaterEscape OR Water:
      DoubleJump, Dash, Grapple
      DoubleJump, Dash, Bash, Grenade=1
      Bash, Grenade=1, Grapple
      Bash, Grenade=2
      Launch

  conn OuterWellspring.TopDoor: free
  # Opher disappears from here if you complete the Watermill quest

# begin pools needs validation area
region PoolsApproach:
  base:
    Danger=25

area PoolsApproach.RightOfWheel:  # (-948, -4185) The rightmost platform of the static wheel
  state PoolsApproach.MarshWallBroken:
    base, Weapon:
      Water, DoubleJump, WaterDash, Grapple  # maybe not obvious?
      Water, Grapple, Launch

  pickup PoolsApproach.AboveWheelEX:
    base:
      # grenadebash doesn't work as well when the wheel spins
      PoolsApproach.WheelFreed, DoubleJump
      Launch
  pickup PoolsApproach.MillPathHC:  # paths from wellspring tbd
    base:
      Water, DoubleJump, Dash, WaterDash, Grapple
      Water, DoubleJump, Grapple, Launch
    advanced:
      Water, WaterDash, DoubleJump, Grapple
      Water, Grapple, Launch
  pickup PoolsApproach.MillPathEC:  # paths from wellspring tbd
    base: Water, Bash, WaterDash OR Danger=10
  pickup PoolsApproach.MillPathEX:  # paths from wellspring tbd
    base:
      Water, Bash, DoubleJump, Dash, Grapple, Danger=10
      Water, Bash, DoubleJump, Grapple, Glide, WaterDash OR Danger=10
      Water, Bash, DoubleJump, Dash, WaterDash
      Water, Bash, Launch, WaterDash OR Danger=10
    advanced:
      Water, Bash, DoubleJump, WaterDash

  conn MarshPastOpher.PoolsPathWest:
    base, PoolsApproach.MarshWallBroken:
      Water, DoubleJump, WaterDash, Grapple  # maybe not obvious?
      Water, Grapple, Launch
    advanced:
      PoolsApproach.MarshWallBroken, Water, WaterDash, Grapple, Dash OR Sword
  # this replaces all MarshPastOpher pickup paths in this area
  conn PoolsApproach.LeftOfWheel:
    base:
      PoolsApproach.WheelFreed OR DoubleJump OR Grapple OR Launch
      Bash, Grenade=1
  conn EastPools.Entry:
    base:
      # grenadebash doesn't work as well when the wheel spins
      Glide, Launch
      Bash, Grenade=1, Launch, DoubleJump OR Dash
      DoubleJump, Dash, Launch, Danger=20
      PoolsApproach.WheelFreed, DoubleJump, Glide
    advanced:
      Launch, Dash  # advanced? definitions tbd
  conn WestGlades.MillApproach:
    base:
      Water, Bash, DoubleJump, Grapple, Danger=10, Dash OR Glide
      Water, Bash, WaterDash, DoubleJump, Grapple, Dash OR Glide OR Danger=15
      Water, Bash, WaterDash, Grapple, Grenade=2, Dash OR Glide
      Water, Bash, Launch, WaterDash, DoubleJump OR Dash OR Grapple OR Glide
      Water, Bash, Launch, Danger=10, DoubleJump OR Dash OR Grapple OR Glide
    advanced:
      Water, Bash, Dash, Glide, Grapple, Grenade=2, Danger=10
      Water, Bash, Grenade=1, Launch, Danger=10

area PoolsApproach.LeftOfWheel:  # (-995, -4185) The leftmost platform of the static wheel
  state PoolsApproach.WheelFreed:
    base: Water, Bash

  pickup PoolsApproach.CurrentEX:
    base: Water, WaterDash
  pickup PoolsApproach.BurrowsPathEX:
    base:
      Water, DoubleJump, Dash, WaterDash, Danger=10
      Water, Glide, WaterDash, DoubleJump OR Dash
      Water, Bash, WaterDash, DoubleJump OR Glide
      Water, WaterDash, Launch, DoubleJump OR Dash OR Bash OR Glide OR Danger=10
    advanced:
      Water, Dash, Glide, WaterDash

  conn PoolsApproach.RightOfWheel:
    base:
      # grenadebash doesn't work when the wheel spins
      PoolsApproach.WheelFreed, Water
      DoubleJump OR Launch
  conn EastPools.Entry:
    base: Water, Launch
    advanced: Water, DoubleJump, WaterDash, Damage=20

region EastPools:
  base:
    Danger=40, Regenerate

area EastPools.Entry:  # (-1092, -4165) At the Voice dialogue
  # The first bubbles here only spawn if you have Flap!
  
  pickup EastPools.TwoCrushersEX:
    base: Water, WaterDash
  
  conn EastPools.LeverRoom:
    base:
      Flap OR Launch
      Bash, Grenade=1
  conn PoolsApproach.LeftOfWheel:
    base:
      Water
      Bash, Grenade=1, Glide
      Glide, Launch
      DoubleJump, Dash, Launch
      Bash, Grenade=1, Launch, DoubleJump OR Dash
  
area EastPools.LeverRoom:  # (-1160, -4152) At the amulet Moki
  state EastPools.QuestAmulet: free
  state EastPools.EntryLever:
    base, EnemyObstacle:
      DoubleJump, Dash OR Glide
      Dash, Glide
      Launch
  state EastPools.BelowTokkBubbleFree:
    base:
      EastPools.EntryLever, Water, Bash
    advanced, EastPools.EntryLever:
      Water, WaterDash
      Water, Bow OR Grenade=1 # Bow=1 not currently a thing

  pickup EastPools.RightOre:
    base:
      DoubleJump, Grapple, Flap, Dash OR Glide  # kinda weird, but I guess this is the casual way?
      Launch, Grapple
    advanced:
      Dash, Grapple, Glide, Flap
  pickup EastPools.CurrentEX:
    base: Water, WaterDash
  pickup EastPools.BelowLeverEX:
    base:  # kinda dangerous with the spikes? but damage seemed mostly avoidable
      DoubleJump, Bash, Grenade=1
      Hammer  # double jump makes it easier
      Launch
  pickup EastPools.AboveDoorOre:
    base, EastPools.EntryLever:  # other paths would be redundant with the paths coming from tokk
      Bash, Grenade=2
      Bash, Grenade=1, DoubleJump OR Grapple

  conn EastPools.TPArea:
    base, EastPools.EntryLever:
      EastPools.BelowTokkBubbleFree, EnemyObstacle, Grapple, Flap, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1  # bashgrenade above
      Bash, Grenade=2, Dash OR Glide  # bashgrenade above
      EnemyObstacle, Bash, Grenade=2, EastPools.BelowTokkBubbleFree OR Water  # bashgrenade below
      Launch
  conn EastPools.Entry: free

area EastPools.TPArea:  # (-1296, -4142) Where Tokk stands
  state EastPools.QuestHandToHandSpyglass:  # quest requirement: silk
    base, LowerDepths.QuestHandToHandSilk:
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1
      Launch
  state EastPools.BelowTokkBubbleFree:
    base:
      Water, Bash
    advanced:
      Water, WaterDash
      Water, Bow OR Grenade=1 # Bow=1 not a thing yet
  state EastPools.LowerWaterDrained:
    base:
      Water OR EastPoolsTP
  # There are two Arenas here: you get one if you enter without WaterDash and another if you enter with it.
  # This path is assuming the worse case of getting the strictly harder WaterDash arena, but doesn't list WaterDash
  # explicitly because you don't need it unless you have it.
  # And any other way would lock basically all of Pools behind WaterDash. So it makes sense, right?
  # Also, for now this state includes breaking the purple wall before the arena because everything else would be dumb
  state EastPools.FightArenas:
    base:
      EastPools.LowerWaterDrained, Weapon, Water, Bash

  state EastPools.QuestStickyGrassSeed:
    base, EastPools.FightArenas:
      Water, Bash, WaterDash OR Launch
      Water, Bash, DoubleJump, Dash OR Glide
      Water, Bash, Dash, Glide
      Water, Bash, Grenade=1, DoubleJump OR Dash OR Glide
  pickup EastPools.SeedQI:
    base: EastPools.QuestStickyGrassSeed  # TEMPORARY - delete when quests have syntax

  pickup EastPools.AboveDoorOre:
    base:
      EastPools.BelowTokkBubbleFree, Grapple, Flap, DoubleJump OR Dash
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Bash, Grenade=2
      Launch
  pickup EastPools.AboveTpEX:
    base:  # these need water to not be softlockable with the player draining the upper water
      Water, DoubleJump, Bash, Grenade=2
      Water, DoubleJump, Grapple, Bash, Grenade=1
      Water, Launch
  pickup EastPools.PurpleWallHC:
    base, UpperPools.UpperWaterDrained:
      Water, WaterDash, Bash, Grenade=3, DoubleJump
      Water, WaterDash, Bash, Grenade=2, DoubleJump, Grapple
      Water, WaterDash, Bash, Launch
  pickup EastPools.LupoOre:
    base: Water
  pickup EastPools.UltraBashShard:
    base: EastPools.LowerWaterDrained, Water, Bash
  pickup EastPools.FightRoomHC:
    base, EastPools.FightArenas, WaterDash:  # The HC only gets unlocked if you finish the alternate WaterDash arena; FightArenas doesn't have WaterDash as requirement included for reasons explained above, so it's needed here
      DoubleJump, Dash OR Grapple
      Bash, Grenade=1
      Launch
  pickup EastPools.EnergyHarvestShard:
    base, EastPools.FightArenas:
      Water, WaterDash, DoubleJump
      Bash, Grenade=1
      Launch
  pickup EastPools.LupoEX:
    base: EastPools.FightArenas, Water, Bash
  pickup EastPools.LupoMap:
    base: EastPools.FightArenas, Water, Bash
  pickup EastPools.BehindCrusherEX:
    base: EastPools.FightArenas, Water

  conn EastPools.LeverRoom:
    base, EastPools.EntryLever, EnemyObstacle:
      DoubleJump OR Dash OR Glide OR Launch  # go above
      Bash, Grenade=1  # go above
      Grapple  # go below
  conn WestPools:
    base: EastPools.FightArenas, Water, Bash, WaterDash, DoubleJump OR Dash OR Glide OR Launch
  conn UpperPools.KeystoneRoom:
    base, EastPools.FightArenas, EnemyObstacle:
      Water, Bash, DoubleJump, Dash OR Glide
      Water, Bash, Launch

region UpperPools:
  base:
    Danger=40, Regenerate

area UpperPools.KeystoneRoom:  # (-1539, -4094) Autosave below the two upper left keystones
  state UpperPools.KeystoneRoomBubbleFree:
    base:
      Water, WaterDash
      Water, Bash
    advanced: Bow OR Grenade=1

  state EastPools.QuestStickyGrassSeed:
    base: EnemyObstacle
  pickup EastPools.SeedQI:
    base: EastPools.QuestStickyGrassSeed  # TEMPORARY - delete when quests have syntax

  pickup UpperPools.LowerKS:
    base:
      Water, DoubleJump, Bash
      Water, WaterDash OR Launch
  pickup UpperPools.UpperLeftKS:
    base:
      Bash, Grenade=1
      UpperPools.KeystoneRoomBubbleFree, DoubleJump, Flap
      Launch
  pickup UpperPools.UpperMidKS:
    base:
      DoubleJump, Bash, Grenade=1
      Bash, Grenade=2, DoubleJump OR Dash OR Glide
      Grapple, DoubleJump OR Dash OR Glide
      Launch
  pickup UpperPools.UpperRightKS:
    base:
      Bash, Grenade=1, Water OR DoubleJump OR Dash OR Glide
      Grapple, DoubleJump OR Glide OR Dash
      Water, WaterDash, DoubleJump
      Launch

  conn UpperPools.BeforeKeystoneDoor:
    base:
      Grapple, DoubleJump OR Dash OR Glide
      Water, Grapple, Bash, Grenade=1
      Bash, Grenade=2, Water OR DoubleJump OR Dash OR Glide
      Bash, Grenade=3
      Launch
  conn UpperPools.BubbleSpamRoom:
    base: Flap, DoubleJump, Dash, Grapple  # seems to be intended
  conn WestPools:
    base: Water, WaterDash, EnemyObstacle OR DoubleJump OR Dash OR Glide OR Launch

area UpperPools.BeforeKeystoneDoor:  # (-1483, -4076) In front of the door blocking waterdash tree
  state UpperPools.KeystoneDoor:
    base: Keystone=4
  state UpperPools.TrialActivation:
    base: DoubleJump OR Grapple OR Launch
  
  conn UpperPools.TreeArea:
    base: UpperPools.KeystoneDoor
  conn UpperPools.KeystoneRoom:
    base: Water OR DoubleJump OR Dash OR Glide OR Launch  # don't really need anything, but eh
  conn UpperPools.BubbleSpamRoom:
    base:
      DoubleJump, Bash, Grenade=1
      Launch

area UpperPools.TreeArea:  # (-1458, -4075) The ledge left of waterdash tree
  state UpperPools.UpperWaterDrained:
    base:
      Water, WaterDash, Grapple, DoubleJump OR Launch
      Water, WaterDash, Launch, DoubleJump, Dash OR Glide
  pickup UpperPools.SwimDashTree: free
  pickup UpperPools.CurrentEX:
    base: Water, WaterDash
  pickup UpperPools.RoofEX:
    base:
      Water, WaterDash, Flap, DoubleJump OR Dash
      Water, WaterDash, Launch
    advanced: Launch  # use the small bubbles
  pickup UpperPools.WaterfallEC:
    base:
      Water, WaterDash, DoubleJump, Dash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Launch
    advanced:  # these are maybe probably not base
      Water, WaterDash, Grapple, DoubleJump OR Dash
      Water, WaterDash, Grapple, Bash, Grenade=1
  pickup EastPools.PurpleWallHC:
    base, UpperPools.UpperWaterDrained:
      Water, WaterDash, DoubleJump, Dash, Bash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Bash, Launch
  pickup EastPools.AboveTpEX:
    base, UpperPools.UpperWaterDrained:
      Water, WaterDash, DoubleJump, Dash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Launch

  conn EastPools.TPArea:
    base, UpperPools.UpperWaterDrained:
      Water, WaterDash, DoubleJump, Dash, Grapple
      Water, WaterDash, DoubleJump, Bash, Grenade=1, Grapple
      Water, WaterDash, Launch

area UpperPools.BubbleSpamRoom:  # (-1585, -4052) To the right of where all the bubbles rise
  pickup UpperPools.FishPoolEX:
    base: Water, Bash OR WaterDash OR Danger=10  # just in case someone's troubled by the fish
  pickup UpperPools.FishPoolOre:
    base:
      DoubleJump, Bash, Dash OR Glide
      Bash, Grenade=1
      Launch
  pickup UpperPools.LeftBubblesEX:  # Beautiful autosave placement right there
    base: Water
  pickup UpperPools.RightBubblesEX:
    base:
      Water, Bash, DoubleJump OR Launch
      Water, WaterDash
    advanced: Water, Grenade=1
  pickup UpperPools.BubblesEC:
    base:
      DoubleJump, Dash OR Glide
      Launch, DoubleJump OR Dash OR Glide

  conn UpperPools.KeystoneRoom:
    base: Water OR DoubleJump OR Dash OR Glide OR Launch
  conn UpperPools.TreeArea:
    base: free

region WestPools:
  base:
    Danger=40, Regenerate

area WestPools:  # (-1652, -4170) the west Pools TP
  state WestPools.KwolokDefeated:
    base: Weapon, Water, WaterDash, Bash, DoubleJump, Danger=55, Dash OR Launch #+ 40 region danger

  state EastPools.QuestStickyGrassSeed:
    base: Water, WaterDash
  pickup EastPools.SeedQI:
    base: EastPools.QuestStickyGrassSeed  # TEMPORARY - delete when quests have syntax

  pickup WestPools.TpEX:
    base:
      Water, WaterDash, DoubleJump, Dash  # hard on keyboard, but I guess this is intended, and no other ability would even help
      Launch
  pickup WestPools.BurrowEX:
    base: Water, Burrow
  pickup WestPools.BurrowOre:
    base: WestPools.KwolokDefeated, EnemyObstacle, Water, WaterDash, Burrow
  pickup WestPools.EscapeRevisitEX:
    base: WestPools.KwolokDefeated, EnemyObstacle, Water, DoubleJump OR WaterDash OR Launch
  pickup UpperPools.LowerKS:
    base: WestPools.KwolokDefeated, EnemyObstacle, Water, WaterDash

  conn UpperPools.KeystoneRoom:
    base, EnemyObstacle:
      Water, WaterDash, Bash, DoubleJump, Dash OR Glide
      Water, WaterDash, Bash, Launch
      WestPools.KwolokDefeated, Water, WaterDash, DoubleJump
      WestPools.KwolokDefeated, Water, WaterDash, Bash, Grenade=1, Dash
# end pools needs validation area

region WoodsEntry:
  base:
    Danger=40, Regenerate

area WoodsEntry.ShriekMeet:  # (478, -4204) The ledge to the left of where the mudpits start
  pickup WoodsEntry.MudPitEX:
    base:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=2
  
  conn WoodsEntry.BelowTeleporter:
    base, RangedWeapon:
      Danger=10, DoubleJump OR Dash OR Glide OR Launch
      Bash, DoubleJump OR Dash OR Glide OR Launch

area WoodsEntry.BelowTeleporter:  # (591, -4198) Read the name
  conn WoodsEntry.ShriekMeet:
    base, RangedWeapon:
      DoubleJump, Dash OR Glide
      Launch
  conn WoodsEntry.Teleporter:
    base:
      Grapple, DoubleJump OR Dash OR Glide
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch
  conn WoodsEntry.TwoKeystoneRoom:
    base: RangedWeapon, DoubleJump OR Dash OR Glide OR Launch

area WoodsEntry.Teleporter:  # (611, -4161) At the West Woods Teleporter
  state WoodsEntry.QuestLastTreeBranch: free  # written out the steps in case they give pickups
  state WoodsEntry.QuestLastTreeSeed:
    base: TuleyShop.QuestLastTreeBranchRejected
  state WoodsEntry.DollQI:  # TEMPORARY - add pickup tbd
    base: GladesTown.QuestFatherKey
  
  pickup WoodsEntry.TpEX: free
  pickup WoodsEntry.LeafPileEX:
    base: Flap
  pickup WoodsEntry.LedgeOre:
    base: 
      Glide, DoubleJump OR Launch
      Bash, Grenade=1, Glide OR Launch
      DoubleJump, Dash, Launch  # coming from below you'd just need Launch
#    advanced:
#      Glide, SentryJump=1

  conn WoodsEntry.ShriekMeet: free
  conn WoodsEntry.BelowTeleporter: free

area WoodsEntry.TwoKeystoneRoom:  # (672, -4182) In front of the keystone door
  state WoodsEntry.KeystoneDoor:
    base: Keystone=2
  
  pickup WoodsEntry.LowerKS:
    base: DoubleJump OR Dash OR Glide  # Launch is awful
  pickup WoodsEntry.UpperKS:
    base: DoubleJump OR Launch
#   advanced: 
#     SentryJump=1, Glide

  conn WoodsMain.BelowFourKeystoneRoom:
    base, WoodsEntry.KeystoneDoor, EnemyObstacle:
      DoubleJump, Dash
      Bash OR Glide OR Launch  # bash uses the enemy
  conn WoodsEntry.BelowTeleporter:
    base: RangedWeapon, DoubleJump OR Glide OR Launch

region WoodsMain:
  base:
    Danger=40, Regenerate

area WoodsMain.BelowFourKeystoneRoom:  # (951, -4209) At the first leaf pile after meeting Ku
  pickup WoodsMain.LowerLeafPileEX:
    base: Flap
  pickup WoodsMain.BehindWallOre:
    base: Weapon, RangedWeapon, Bash, Grenade=2, DoubleJump  # different ways to solve
    advanced: Weapon, DoubleJump, Dash  # Perform wrap-around double jumps on the far right wall under the ore
  pickup WoodsMain.BelowKeystonesEX:
    base: RangedWeapon, Bash, Grenade=2, DoubleJump  # different ways to solve
  
  conn WoodsMain.FourKeystoneRoom:
    base, RangedWeapon:
      Flap, Glide
      Bash, Grenade=2, DoubleJump, Dash  # different ways to solve
      Launch
  conn WoodsEntry.TwoKeystoneRoom:
    base, WoodsEntry.KeystoneDoor:
      Bash, Grenade=2, Danger=10  # uses the enemy
      Bash, Grenade=1, Danger=10, DoubleJump OR Dash  # uses the enemy
      Launch, DoubleJump OR Dash OR Bash OR Glide  # bash uses the enemy

area WoodsMain.FourKeystoneRoom:  # (950, -4167) The floor of the keystone room
  pickup WoodsMain.BehindWallOre:
    base: Weapon, DoubleJump OR Dash OR Glide OR Launch
  pickup WoodsMain.BelowKeystonesEX:
    base: Bash, DoubleJump OR Dash OR Glide OR Launch
  pickup WoodsMain.MiddleLeafPileEX:
    base: Flap
  pickup WoodsMain.RightKS:
    base:
      Glide OR Launch
      Bash, Grenade=1

  conn WoodsMain.BeforeKeystoneDoor:
    base:
      DoubleJump OR Glide OR Launch
      Bash, Dash OR Grenade=1
  conn WoodsMain.BelowFourKeystoneRoom: free

area WoodsMain.BeforeKeystoneDoor:  # In front of the four keystone door
  state WoodsMain.KeystoneDoor:
    base: Keystone=4
  
  pickup WoodsMain.UpperKS:
    base, Weapon:
      Glide OR Launch
      Bash, Grenade=1, DoubleJump OR Dash
  pickup WoodsMain.LeftKS:
    base: Glide
  pickup WoodsMain.LowerKS:
    base, Flap:  # Flap being the casual way of breaking the yellow barrier
      Glide OR Launch
      DoubleJump, Dash
      Bash, DoubleJump OR Dash

  conn WoodsMain.GiantSkull:
    base: WoodsMain.KeystoneDoor
  conn WoodsMain.FourKeystoneRoom: free

area WoodsMain.GiantSkull:  # (957, -4136) Behind the four keystone room door
  pickup WoodsMain.UpperLeafPileEX:
    base: Flap
  pickup WoodsMain.BehindDoorRoofEX:
    base:
      Bash OR Launch
      DoubleJump, Dash, Glide
  
  conn WoodsMain.BelowHiddenOre:
    base:
      Weapon, Glide
      RangedWeapon, Glide OR Launch
  conn WoodsMain.BeforeKeystoneDoor:
    base: WoodsMain.KeystoneDoor

area WoodsMain.BelowHiddenOre:  # (1038, -4100) Below and to the right of the hidden ore, close to the yellow wall
  pickup WoodsMain.HiddenOre:
    base: Flap, Glide
  pickup WoodsMain.YellowWallEX:
    base:
      Weapon, Flap, Glide
      RangedWeapon, Flap, Glide OR Launch
  
  conn WoodsMain.PetrifiedHowl:
    base: Glide
  conn WoodsMain.GiantSkull:
    base, Weapon:
      Glide OR Launch
      DoubleJump, Dash
      RangedWeapon, DoubleJump, Bash

area WoodsMain.PetrifiedHowl:  # (910, -4071) At silenced Howl
  pickup WoodsMain.PetrifiedHowlEX: free

  conn WoodsMain.AboveHowl:
    base:
      Weapon, Bash, Glide, DoubleJump OR Grenade=2
      Weapon, DoubleJump, Dash, Glide
      Launch, DoubleJump OR Dash OR Glide OR Bash  # a bit awful honestly. The good news is that you can also just Launch upwards easily instead of going the long way
  conn WoodsMain.BelowHiddenOre:
    base:
      Glide
      Launch, DoubleJump OR Dash

area WoodsMain.AboveHowl:  # (916, -4046) At the semisolid above silenced Howl
  state WoodsMain.TrialActivation:
    base:
      DoubleJump, Dash, Bash, Grapple, Glide, Burrow
      Launch, Grapple, Bash, DoubleJump OR Dash OR Glide
  
  pickup WoodsMain.HiddenEX: free
  pickup WoodsMain.OverflowShard:
    base:
      DoubleJump, Bash, Grapple, Burrow, Dash OR Glide
      Launch, Grapple, Bash, DoubleJump OR Dash OR Glide
  
  conn WoodsMain.Teleporter:
    base, RangedWeapon:
      DoubleJump OR Launch
      Bash, Grenade=1
  conn WoodsMain.PetrifiedHowl: free

area WoodsMain.Teleporter:  # (1083, -4052) At the East Woods Teleporter
  conn WoodsMain.FeedingGrounds:
    base:
      Glide
      DoubleJump, Bash, Launch  # :)
  conn WoodsMain.AboveHowl:
    base:
      Glide, Launch
      DoubleJump, Glide, Bash, Grenade=1
      DoubleJump, Bash, Launch  # :)

area WoodsMain.FeedingGrounds:  # (1292, -3993) At the left entrance to feeding grounds
  # having the initial escape completed is a negative, not a positive. The paths going through it are the connections to Wastes.
  # if you complete the initial escape, rocks fall and block most of the connection paths to WestTP. This is equally true for the base game though and solved by the fact that if you complete the escape, you unlock the teleporter, making these paths not softlockable
  pickup WoodsMain.CombatShrine:
    base, Combat, RangedWeapon, ShieldEnemy, Bash, Danger=40:  # +40 region danger
      Glide OR Launch
      DoubleJump, Dash
  pickup WoodsMain.ShrineEX:
    base: 
      Glide OR Launch
      DoubleJump, Dash
  
  # connections to the east woods teleporter would be a dead end
  conn WoodsMain.AboveHowl:
    base:
      DoubleJump, Bash, Grenade=1
      Launch
  conn LowerWastes.WestTP:
    base:
      Grapple, Glide, DoubleJump OR Dash OR Launch  # this solves with Seir as well
      WindtornRuins.EscapeComplete:  # these wouldn't solve without Seir
        DoubleJump, Bash, Grenade=1, Grapple
        Grapple, Glide
        Burrow
        Launch

region LowerReach:
  base:
    Danger=40, Regenerate

area LowerReach.Entry:  # (-395, -4026) Behind Baur
  # basically the entirety of this area is not validated, because almost all the original paths were either impossible or not base with the given skillset
  state LowerReach.BearSneezed:
    base: Flap
  state LowerReach.BearBridgeBroken:
    base, LowerReach.BearSneezed:  # the game behaves weird when dropping the rock on Baur, so not making that base
      DoubleJump, Launch  # Can't rely on the sleeping bear to be there, same goes for a lot of Launch paths coming up
      Bash, DoubleJump OR Launch
      Dash, Bash, Glide
      Dash, Bash, Grenade=1
      Bash, Glide, Grenade=2  # most of these skills are to get past the frozen plant and are removed in the path below
      LowerReach.LowerFurnace, Bash, Grenade=1
    advanced:
      LowerReach.BearSneezed, Launch
  state LowerReach.LowerFurnace:
    base, LowerReach.BearSneezed, LowerReach.BearBridgeBroken:
      Bash, Flap
      Grenade=1
  state LowerReach.LeftFurnace:
    base, Grenade=1:  # Grenade to light the furnace
      # these paths want the player to bash off the skeetos, as is taught in other regions of the game
      DoubleJump, Bash
      Dash, Bash, Glide
      Bash, Grenade=2, Glide  # most of these skills are to get past the frozen plant and are removed in the path below
      LowerReach.LowerFurnace, Bash, Grenade=1
      Launch, DoubleJump OR Bash
  state LowerReach.Lever:
    base:
      DoubleJump, Bash, Grenade=1
      Launch, DoubleJump OR Bash
      LowerReach.LowerFurnace, DoubleJump, Bash
    advanced:  # One of the grenades hit the ceiling sometimes, so I didn't want those to be base. They might need less skills for advanced. Also these probably won't work if you heated the furnace and there might have to be a state for cooling the furnace
      Dash, Bash, Glide, Grenade=2
      Dash, Bash, Grenade=3

  pickup LowerReach.BelowBaurEX:
    base, LowerReach.BearSneezed, LowerReach.BearBridgeBroken:
      DoubleJump, Dash, Bash, Flap
      Bash, Grenade=1
      Launch
  pickup LowerReach.AboveBaurLowerEX:
    base:  # Using the mortar shooting from offscreen might be one of the intended strats? Wasn't considered for these paths
      LowerReach.LowerFurnace OR Grenade=1:  # these use a grenadebash if they can't use the unfrozen plant
        DoubleJump, Bash
        Dash, Bash, Glide  # not sure about this path's difficulty when the LowerFurnace is hot, might need state for cooling it
      Bash, Grenade=2  # same as above, also this could maybe go in the above group? If you try to make the jump off the plant, you won't make it, but it will reliably trigger the mortar to shoot at you and makes it easy to catch. Decided against it because the player might not try that jump from eyesight
      Launch, DoubleJump OR Bash
  pickup LowerReach.AboveBaurUpperEX:
    base:  # same about the mortar as above
      Launch, DoubleJump OR Bash  # not entirely sure about base
      LowerReach.LowerFurnace, DoubleJump, Bash
  pickup LowerReach.IcefallOre:
    base, LowerReach.LeftFurnace:  # EnemyObstacle alone isn't really enough here, with the Furnace lit it's hard to get past the enemies even with a weapon. The paths consider tools to help.
      DoubleJump, Bash, Grapple
      Dash, Bash, Glide, Grapple
      Bash, Grenade=2, Grapple, Glide  # most of these skills are to get past the frozen plant and are removed in the path below
      LowerReach.LowerFurnace, Bash, Grenade=1, Grapple
      DoubleJump, Grapple, Launch, Danger=10  # Grapple past the enemies and probably get hit by them
      DoubleJump, Water, Launch  # Swim past the enemies
      Launch, Bash
  pickup LowerReach.IcefallEX:
    base, LowerReach.LeftFurnace:  # Here you have to deal with the enemies a lot less
      Launch, DoubleJump OR Bash
      DoubleJump, Bash  # bash off the skeetos

  conn LowerReach.Central:
    base, LowerReach.Lever:
      DoubleJump, Bash
      Dash, Bash, Glide
      Bash, Grenade=1, Dash OR Glide
      Launch, DoubleJump OR Bash
  conn WestGlades.Upper:
    base: LowerReach.BearSneezed

area LowerReach.Central:  # (-347, -4011) After the lever door
  pickup LowerReach.AboveDoorEX:
    base:
      LowerReach.CentralFurnace:
        DoubleJump, Dash, Bash OR Hammer  # not validated
        Bash, Grenade=1  # not validated
      Launch
  pickup LowerReach.LupoMap:
    base:
      Launch
      DoubleJump, Dash
      LowerReach.CentralFurnace, Bash, Grenade=1, DoubleJump OR Dash OR Glide  # not validated
  pickup LowerReach.TPLeftEX:
    base:
      Launch
      LowerReach.CentralFurnace:
        DoubleJump, Dash
        Bash, Grenade=1, DoubleJump OR Dash OR Glide  # not validated

  conn LowerReach.Entry:
    base: LowerReach.Lever, DoubleJump OR Dash OR Launch
  conn LowerReach.Lower: free  # wtf reach logic
  conn LowerReach.OutsideTPRoom:  # all not validated (added this area)
    base:
      Launch
      LowerReach.CentralFurnace:
        DoubleJump, Dash, Bash
        Bash, Grenade=1

area LowerReach.Lower:  # (-316, -4036) Next to the soup below the teleporter
  state LowerReach.QuestHandToHandHat:  # paths from other anchors should currently be redundant
    base: GladesTown.QuestHandToHandSoup, LowerReach.WindChannelLantern, Glide
  state LowerReach.CentralFurnace:
    base, ShieldEnemy OR Bash:
      Grenade=1
      DoubleJump, Dash, Bash, Flap
  state LowerReach.WindChannelLantern:
    base: Grenade=1, ShieldEnemy OR Bash

  pickup LowerReach.MeltIceEX:
    base: Grenade=1
  pickup LowerReach.BurrowEX:
    base: Burrow, DoubleJump OR Dash OR Glide OR Launch  # not validated
  pickup LowerReach.BelowLupoEX:
    base:
      DoubleJump, Bash, Grenade=1  # not validated
      Launch
      LowerReach.CentralFurnace, DoubleJump OR Dash  # not validated
  pickup LowerReach.BreakWallEX:
    base: Weapon, ShieldEnemy OR Bash
  pickup LowerReach.WindBottomEX:
    base: LowerReach.WindChannelLantern, Glide
  pickup LowerReach.WindHiddenEX:
    base: LowerReach.WindChannelLantern, Glide

  conn LowerReach.Central:  # not validated
    base:
      DoubleJump, Bash, Flap OR Grenade=1
      DoubleJump, Burrow
      Launch
  conn LowerReach.East:
    base, LowerReach.WindChannelLantern:
      DoubleJump, Dash, Bash, Grenade=2, Glide
      Glide, Launch

area LowerReach.OutsideTPRoom:  # (-309, -3968) To the left of the teleporter room
  # none validated
  state LowerReach.TPIceMelted:
    base: Grenade=1

  pickup LowerReach.AboveDoorEX:
    base: Bash OR Hammer
  pickup LowerReach.LupoMap:
    base: DoubleJump OR Dash OR Glide OR Launch
  pickup LowerReach.TPLeftEX:
    base:
      Bash, DoubleJump OR Dash OR Glide
      Launch
  pickup LowerReach.HiddenOre:
    base:
      Launch
      LowerReach.CentralFurnace, DoubleJump, Bash, Dash OR Glide OR Grenade=1

  conn LowerReach.Lower: free
  conn LowerReach.Central:
    base: DoubleJump OR Dash OR Bash OR Glide OR Launch OR Hammer
  conn UpperReach.KeystoneRoom:
    base:
      DoubleJump, Dash, Bash
      DoubleJump, Bash, Grenade=2
      Launch

area LowerReach.Teleporter:  # (-259, -3961) This has to exist to support the teleporter pickup
  # none validated
  state LowerReach.TPIceMelted:
    base: Grenade=1

  conn LowerReach.OutsideTPRoom:
    base: LowerReach.TPIceMelted
  conn LowerReach.East:
    base, LowerReach.TeleporterLantern:
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch

region UpperReach:
  base:
    Danger=40, Regenerate

area UpperReach.KeystoneRoom:  # (-301, -3920) At Tokk
  state UpperReach.HeatFurnace:
    base:
      Grenade=1  # this makes grenadebash paths meaningless
      Flap, Bash, DoubleJump OR Launch
  state UpperReach.CoolFurnace:  # need this because the player might have to refreeze the waterfall
    base: Flap

  pickup UpperReach.LifeForceShard:
    base:
      Bash, Grenade=1, Burrow, DoubleJump, Dash  # Just one of djump / dash is maybe too precise for base
      Bash, Grenade=1, Burrow, Glide
      Burrow, Launch
  pickup UpperReach.LifeForceEX:
    base:
      Bash, Grenade=1, Burrow, DoubleJump, Dash
      Bash, Grenade=1, Burrow, Glide
      Burrow, Launch
  pickup UpperReach.LowerKS:
    base:
      Launch
      UpperReach.HeatFurnace:
        DoubleJump
        Bash, Grenade=1
  pickup UpperReach.MiddleLeftKS:
    base:
      Launch, DoubleJump OR Dash OR Glide
      UpperReach.HeatFurnace:
        DoubleJump, Bash, Grapple OR Glide
        Dash, Bash, Grenade=1, Glide  # not validated
  pickup UpperReach.UpperKS:  # not validated (reworked the furnace states)
    base:
      DoubleJump, Bash, Grenade=1  # go past the hidden ore
      Launch
      UpperReach.CoolFurnace, DoubleJump, Bash  # use the icefall
      UpperReach.HeatFurnace:
        DoubleJump, Bash, Grapple  # grenadebash at the waterfall would be redundant with the path going past the hidden ore that doesn't rely on furnace state
        DoubleJump, Bash, Glide  # using the tongue plant
  pickup UpperReach.MiddleRightKS:  # not validated (reworked the furnace states)
    base, UpperReach.HeatFurnace:
      Bash, Glide, DoubleJump OR Grenade=1  # use the tongue plant
      DoubleJump, Bash, Grenade=1  # go past the hidden ore
      DoubleJump, Grapple
      Bash, Grenade=2, Dash  # bashgrenade at the waterfall
      Water, Bash, Grenade=1, Dash  # also bashgrenade at waterfall
      Water, Bash, Grenade=2  # still bashgrenade at waterfall
      Launch
  pickup UpperReach.SoupOre:  # not validated (reworked the furnace states)
    base:
      DoubleJump, Bash, Grenade=1
      Launch
      UpperReach.CoolFurnace:
        DoubleJump
        Bash, Grenade=1
      UpperReach.HeatFurnace:
        Bash, Glide, DoubleJump OR Grenade=1  # use the tongue plant
        DoubleJump, Grapple
        Bash, Grenade=2, Dash  # bashgrenade at the waterfall
        Water, Bash, Grenade=1, Dash  # also bashgrenade at waterfall
        Water, Bash, Grenade=2  # still bashgrenade at waterfall
  pickup UpperReach.SwingPoleEX:  # not validated (reworked the furnace states)
    base:
      DoubleJump, Bash, Grenade=1
      Launch
      UpperReach.CoolFurnace:
        DoubleJump
        Bash, Grenade=1
      UpperReach.HeatFurnace:
        Bash, Glide, DoubleJump OR Grenade=1  # use the tongue plant
        DoubleJump, Grapple
        Bash, Grenade=2, Dash  # bashgrenade at the waterfall
        Water, Bash, Grenade=1, Dash  # also bashgrenade at waterfall
        Water, Bash, Grenade=2  # still bashgrenade at waterfall
  pickup UpperReach.SwimEX:
    base: UpperReach.HeatFurnace, Water, EnemyObstacle OR DoubleJump

  conn UpperReach.TreeRoom:  # not validated (added this area)
    base, UpperReach.HeatFurnace, EnemyObstacle:
      DoubleJump, Dash OR Grapple
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Launch
      Water
  conn LowerReach.OutsideTPRoom: free

area UpperReach.TreeRoom:  # (-140, -3912) Behind the keystone door
  state UpperReach.QuestSpringPlantsSeed:
    base: Grenade=1
  pickup UpperReach.SeedQI:
    base: UpperReach.QuestSpringPlantsSeed  # TEMPORARY - delete when quests have syntax

  pickup UpperReach.LightBurstTree:
    base: free
  pickup UpperReach.TreeOre:  # not validated
    base:
      DoubleJump, Bash, Grenade=1, Dash OR Glide
      Dash, Bash, Grenade=1, Glide
      Launch, DoubleJump OR Dash OR Glide
  pickup UpperReach.WellEX:
    base: free
  pickup UpperReach.HiddenEX:
    base: Grenade=1

  conn UpperReach.KeystoneRoom:  # not validated
    base, UpperReach.HeatFurnace:
      DoubleJump, Grapple
      DoubleJump, Dash
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Water

area LowerReach.East:  # (-192, -3955) Right of the Lantern opening the Tp room
  # no backwards paths are considered, would currently be redundant
  state LowerReach.TeleporterLantern:
    base: Grenade=1
  state LowerReach.RolledSnowball:
    base: EnemyObstacle, Grenade=1
  state LowerReach.PastSnowballLantern:
    base, LowerReach.RolledSnowball:
      DoubleJump, Bash, Grenade=2, Glide OR Dash  # not validated
      Grenade=1, Launch
  state LowerReach.HeatEastFurnace:  # not validated, this is required for the underwater pickup
    base, LowerReach.RolledSnowball:
      Grenade=1, Launch
      DoubleJump, Bash, Grenade=3, Dash OR Glide
  state LowerReach.CoolEastFurnace:  # not validated, the intentional path is to cool this furnace
    base, LowerReach.RolledSnowball:
      Flap, Launch
      Flap, DoubleJump, Bash, Grenade=2, Dash OR Glide
  state LowerReach.ArenaBeaten:  # not validated
    base, LowerReach.RolledSnowball, LowerReach.PastSnowballLantern, Weapon, Regenerate:
      Launch, LowerReach.CoolEastFurnace OR DoubleJump OR Dash OR Glide
      LowerReach.CoolEastFurnace, DoubleJump, Bash, Grenade=2, Dash OR Glide

  pickup LowerReach.SnowballHC:
    base: LowerReach.RolledSnowball, Burrow, DoubleJump OR Dash OR Glide OR Launch OR Danger=20
  pickup LowerReach.RoofLeftEX:
    base:
      LowerReach.CoolEastFurnace, DoubleJump, Dash, Bash, Grenade=1  # blame moon
      DoubleJump, Launch, Dash OR Glide
      Bash, Grenade=1, Launch  # not validated
  pickup LowerReach.RoofRightEX:
    base:
      LowerReach.CoolEastFurnace, Grenade=2, Bash
      Launch
  pickup LowerReach.FractureShard:
    base, LowerReach.HeatEastFurnace:
      Water, Launch
      Water, DoubleJump, Bash, Grenade=1, Dash OR Glide  # not validated

  # connections not validated
  conn LowerReach.Teleporter:
    base, LowerReach.TeleporterLantern:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grenade=1
  conn LowerReach.Lower:
    base: EnemyObstacle, Glide
  conn LowerReach.Trial:
    base, LowerReach.RolledSnowball, LowerReach.PastSnowballLantern, LowerReach.ArenaBeaten:
      Launch, LowerReach.CoolEastFurnace OR DoubleJump OR Dash OR Glide
      LowerReach.CoolEastFurnace, DoubleJump, Bash, Grenade=2, Dash OR Glide

area LowerReach.Trial:  # (70, -4044) At trial start
  state LowerReach.KeystoneDoor:
    base: Keystone=4
  state LowerReach.TrialActivation:
    base: LowerReach.KeystoneDoor
  state LowerReach.WispCollected:  # not validated, can be turned into wisp pickup later
    base, LowerReach.ArenaBeaten:
      Dash, Bash, Grenade=4, Grapple, Glide, Water OR DoubleJump
      Glide, Bash, Launch
  state LowerReach.BearSneezed:
    base: LowerReach.WispCollected  # the game forces Baur awake when collecting the wisp

  pickup LowerReach.RightKS:
    base:
      Glide
      DoubleJump, Dash, Bash, Grenade=1  # not validated
      Launch, DoubleJump OR Danger=20  # not validated
  pickup LowerReach.UpperLeftKS:
    base: Glide
  pickup LowerReach.MiddleLeftKS:
    base: Glide
  pickup LowerReach.BottomLeftKS:
    base: Glide
  pickup LowerReach.TrialEX:
    base: Glide
  pickup LowerReach.EscapeRevisitEX:  # not validated
    base, LowerReach.ArenaBeaten, LowerReach.WispCollected:
      Bash, Grenade=5, Glide, DoubleJump
      Bash, Grenade=4, Glide, Grapple
      Bash, Glide, Launch
  # Connections to LowerReach.East would currently be redundant with ArenaBeaten
  conn GladesTown.ReachPath:
    base: Glide

region UpperDepths:
  base:
    Danger=40, Regenerate

area UpperDepths.Entry:  # (161, -4340) The little standable ground below the entrance
  pickup UpperDepths.EntrySpikesEX:
    base: Glide
  pickup UpperDepths.EntryRoofEX:
    base, EnemyObstacle:
      Glide, Bash, DoubleJump OR Dash
      Glide, DoubleJump, Dash, Grapple
      Glide, Launch
  pickup UpperDepths.EntryOre:
    base, EnemyObstacle:
      Weapon, Glide, Grapple, DoubleJump OR Dash
      Glide, Bash, DoubleJump OR Grapple
      Glide, Launch
  
  conn UpperDepths.FirstKSRoom:
    base: EnemyObstacle, Glide

area UpperDepths.FirstKSRoom:  # (245, -4417) Below the first firefly egg
  state UpperDepths.EntryKeystoneDoor:
    base, Keystone=2:
      DoubleJump, Grapple
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Launch
  state UpperDepths.LightPuzzle:  # breaking the corruption blocking the light
    base, UpperDepths.EntryKeystoneDoor, Weapon:
      DoubleJump, Bash, Grapple
      Bash, Launch
  
  pickup UpperDepths.EntryRoofEX:
    base, EnemyObstacle:
      Grapple, DoubleJump, Bash
      Grapple, DoubleJump, Dash
      Launch, DoubleJump OR Grapple
  pickup UpperDepths.EntryOre:
    base, EnemyObstacle:
      Grapple, DoubleJump
      Launch, DoubleJump OR Grapple
  pickup UpperDepths.RightEntryKS:
    base, Weapon:
      Grapple, DoubleJump
      Launch, DoubleJump OR Dash OR Glide OR Grapple
  pickup UpperDepths.LeftEntryKS:
    base:
      Weapon, Grapple, DoubleJump OR Dash
      Weapon, Launch
      EnemyObstacle, DepthsLight
  pickup UpperDepths.SwimEC:
    base: EnemyObstacle, DepthsLight, Water
  
  conn UpperDepths.Entry:
    base, EnemyObstacle:
      Glide, Grapple, DoubleJump
      Glide, Launch, DoubleJump OR Grapple
  conn UpperDepths.BelowHive:
    base, UpperDepths.EntryKeystoneDoor, UpperDepths.LightPuzzle OR DepthsLight:
      Bash, DoubleJump, Grapple
      Bash, Grenade=1, DoubleJump OR Dash OR Glide OR Grapple
      Launch

area UpperDepths.BelowHive:  # (447, -4410) Below the Hive, on top of the tunnel leading downwards
  pickup UpperDepths.HiveEX:
    base: Bash OR Launch
  pickup UpperDepths.RightEntryKS:
    base: DepthsLight, Launch
  
  conn UpperDepths.FirstKSRoom:
    base, UpperDepths.EntryKeystoneDoor, UpperDepths.LightPuzzle OR DepthsLight:
      DoubleJump OR Dash OR Glide OR Launch
      Bash, Grapple
  conn UpperDepths.Teleporter:
    base: Grapple OR Launch
  conn UpperDepths.SecondKSRoom:
    base: DepthsLight, DoubleJump OR Dash OR Glide OR Launch  # a bit scary...
  conn UpperDepths.Central:
    base: DepthsLight  # a bit scary...

area UpperDepths.Teleporter:  # (513, -4361) The spirit well
  pickup UpperDepths.TeleporterEX: free  # just a few steps away in the darkness
  
  conn UpperDepths.BelowHive:
    base:
      RangedWeapon
      Weapon, Launch
      DepthsLight
  conn UpperDepths.SecondKSRoom:
    base:
      RangedWeapon, DoubleJump OR Dash OR Glide OR Launch  # a bit scary...
      Weapon, Launch

area UpperDepths.SecondKSRoom:  # (464, -4484) The firefly egg to the right of the second keystone door
  state UpperDepths.CentralKeystoneDoor:
    base: Keystone=2
  state UpperDepths.MoraDefeated:
    base, Combat, Danger=55:  # +40 region danger
      DepthsLight, DoubleJump, Dash, Bash, Grapple
      DepthsLight, Bash, Grapple, Launch
  
  state UpperDepths.QuestLightcatchersSeed:
    base:
      DepthsLight, DoubleJump, Dash, Grapple
      Weapon, DepthsLight, DoubleJump, Dash, Bash, Grenade=1
      DepthsLight, Launch
  pickup UpperDepths.SeedQI:
    base: UpperDepths.QuestLightcatchersSeed  # TEMPORARY - delete when quests have syntax
  
  pickup UpperDepths.RightHealthKS:
    base: Weapon OR DepthsLight
  pickup UpperDepths.LeftHealthKS:
    base: 
      Weapon, DoubleJump, Dash OR Glide
      DepthsLight, DoubleJump, Dash OR Glide
      DepthsLight, DoubleJump, Bash, Grenade=1
      Launch, Weapon OR DepthsLight
  pickup UpperDepths.KeystoneHC:
    base:
      Weapon, DoubleJump, Dash, Glide
      DepthsLight, DoubleJump, Dash OR Glide
      Launch, Weapon OR DepthsLight
  pickup UpperDepths.BossPathEX:
    base:
      DepthsLight, DoubleJump, Dash
      DepthsLight, DoubleJump, Bash, Grenade=1
      DepthsLight, Launch

  conn UpperDepths.Central:
    base: UpperDepths.CentralKeystoneDoor
  conn UpperDepths.BelowHive:
    base: DepthsLight, Launch
  conn UpperDepths.Teleporter:
    base, Weapon:
      DepthsLight, DoubleJump, Dash, Grapple
      DepthsLight, Launch

area UpperDepths.Central:  # (428, -4474) The firefly egg to the left of the second keystone door
  pickup LowerDepths.BelowDoorOre:
    base: DepthsLight  # It's hidden in a dark area, not hard to reach.
  pickup LowerDepths.LeftEX:
    base: 
      Weapon, DoubleJump OR Dash OR Glide OR Launch
      DepthsLight, DoubleJump OR Dash OR Glide OR Launch
  
  conn UpperDepths.BelowHive:
    base, Weapon OR DepthsLight:
      DoubleJump, Grapple
      Launch
  conn UpperDepths.SecondKSRoom:
    base: UpperDepths.CentralKeystoneDoor
  conn LowerDepths.West:
    base:
      Weapon, Dash, DoubleJump OR Glide
      DepthsLight, DoubleJump, Dash
      DepthsLight, Glide
      Launch, Weapon OR DepthsLight
  conn LowerDepths.Central:
    base:  # some of the Weapon paths are a bit treacherous...
      Weapon, DoubleJump, Dash, Bash OR Glide
      Weapon, Launch, DoubleJump OR Glide
      DepthsLight, DoubleJump, Dash, Bash OR Glide
      DepthsLight, Bash, Glide
      DepthsLight, Bash, Grenade=1, DoubleJump OR Dash OR Glide
      DepthsLight, Launch, DoubleJump OR Dash OR Bash OR Glide

region LowerDepths:
  base:
    Danger=40, Regenerate

area LowerDepths.West:  # (322, -4510) At the Moki needing a Lantern
  state LowerDepths.QuestHandToHandSilk:
    base: GladesTown.QuestHandToHandLantern

  pickup LowerDepths.CombatShrine:
    base, Combat, Danger=20:  # +40 region danger
      DepthsLight, Water, Bash, DoubleJump OR Launch
      DepthsLight, Water, Bash, Grenade=1, Dash OR Glide
  pickup LowerDepths.SwimEC:
    base: DepthsLight, Water
  # backwards paths would be redundant currently

area LowerDepths.Central:  # (482, -4536) Below where the trial starts
  pickup LowerDepths.RaceStartHC:
    base:
      DoubleJump, Grapple, Dash OR DepthsLight
      Launch
  
  conn LowerDepths.East:
    base:
      Bash, DoubleJump, Dash OR Glide
      Launch, DoubleJump OR Dash OR Bash OR Glide
  # back to uppercentral would be redundant currently

area LowerDepths.East:  # (570, -4549) The lit up room on the trial path
  state LowerDepths.TrialActivation:
    base:
      DoubleJump, Bash, Grenade=3
      DoubleJump, Bash, Grenade=2, Grapple
      DoubleJump, Dash, Bash, Grapple
      Bash, Grapple, Glide
      Launch
  pickup LowerDepths.SpiritSurgeShard:
    base:
      DoubleJump, Grapple, Dash OR Glide
      Launch, DoubleJump OR Dash OR Grapple OR Glide
  pickup LowerDepths.LupoMap:
    base:
      Grapple, DoubleJump OR Dash OR Glide
      Launch, DoubleJump, Dash
      Launch, Glide
      DepthsLight, Glide
      DepthsLight, Launch, DoubleJump OR Dash
  pickup LowerDepths.RightEX:
    base:
      Weapon, Launch, Bash, DoubleJump, Dash
      Weapon, Launch, Bash, Glide
      Weapon, Launch, Grapple, DoubleJump OR Dash OR Bash OR Glide
      DepthsLight, Bash, Grapple, DoubleJump OR Dash OR Glide
      DepthsLight, Launch, Bash OR Grapple
  pickup LowerDepths.FlashTree:
    base:
      Weapon, DoubleJump, Bash, Grapple, Dash OR Glide
      Weapon, Launch, Bash, DoubleJump, Dash
      Weapon, Launch, Bash, Glide
      Weapon, Launch, Grapple, DoubleJump OR Dash OR Bash OR Glide
      DepthsLight, Bash, Grapple, DoubleJump OR Dash OR Glide
      DepthsLight, Launch, Bash OR Grapple
  
  conn UpperDepths.SecondKSRoom:
    base, Weapon:
      DepthsLight, DoubleJump, Bash, Grapple
      DepthsLight, Launch
  # back to lowercentral would be redundant currently

region LowerWastes:
  base:
    Danger=50, Regenerate

area LowerWastes.WestTP:  # (1461, -3996) At the Western Wastes TP
  pickup LowerWastes.WestTPOre:
    base: Burrow
  pickup WoodsMain.FeedingGroundsEX:
    base: WindtornRuins.EscapeComplete, Burrow, DoubleJump OR Dash OR Glide OR Launch  # Seir to make it a safe path

  conn LowerWastes.SunsetView:
    base:
      DoubleJump, Grapple
      Bash, Grenade=1, DoubleJump OR Dash
      Launch
  conn WoodsMain.FeedingGrounds:
    base: WindtornRuins.EscapeComplete, Burrow  # Seir to make it a safe path
  conn WeepingRidge.Bottom:
    base, WindtornRuins.EscapeComplete:  # Seir to make it a safe path
      Burrow, DoubleJump, Glide, Grapple
      Burrow, Bash, Grenade=1, Glide, Grapple
      Burrow, DoubleJump, Bash, Grenade=1, Grapple
      Burrow, Launch

area LowerWastes.SunsetView:  # (1552, -3984) At the Sunset View checkpoint
  pickup LowerWastes.SunsetViewEX: free
  pickup LowerWastes.PurpleWallEX:
    base: Burrow, Bash
  conn LowerWastes.WestTP:
    base: DoubleJump OR Dash OR Glide OR Launch
  conn LowerWastes.Shovel:
    base:  # I think this is fine without EnemyObstacle?
      Grapple, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1 # Does require double jump to the grenade, and then double jump after bash to clear grapple section
      Launch  # Pretty free. Only difficulty is wall jumping pre-Launch to go over the grapples.

area LowerWastes.Shovel:  # (1634, -3980) On the ground to the left of the Sand Bridge
  state LowerWastes.QuestEerieGem:
    base: Burrow
  pickup LowerWastes.SandBridgeOre: free

  conn LowerWastes.SunsetView:
    base: EnemyObstacle
  conn LowerWastes.TreeArea:
    base: Burrow
  conn LowerWastes.SandPot:
    base, EnemyObstacle:
      Hammer OR DoubleJump OR Burrow OR Launch
      Bash, Grenade=1

area LowerWastes.SandPot:  # (1725, -3989) At autosave to the left of Sand Pot
  pickup LowerWastes.MuncherTunnelEC:
    base: Burrow
  pickup LowerWastes.SandPotHC:
    base:
      Burrow  # should be fine for base? It mostly works holding left with somewhat proper timing
      Launch
  pickup LowerWastes.SandPotEX:  # Duplicated pickup as paths differ.
    base:
      Burrow, Dash, Grapple, DoubleJump OR Glide
      Burrow, Bash, Grenade=1
      Burrow, Launch

  conn LowerWastes.Shovel:
    base:
      DoubleJump
      Launch
      EnemyObstacle, Bash, Grenade=1
  conn LowerWastes.WoodenBridge:
    base:
      Dash, DoubleJump OR Grapple
      Dash, Bash, Grenade=1
      Bash, Grenade=2, DoubleJump OR Glide
      Launch

area LowerWastes.WoodenBridge:  # (1794, -3977) Directly above MuncherPitEX
  pickup LowerWastes.SandPotEX:
    base:
      Burrow, Grapple, DoubleJump OR Glide
      Burrow, Grapple, Bash, Grenade=1
      Burrow, Bash, Grenade=1, DoubleJump, Dash OR Glide
      Burrow, Launch
  pickup LowerWastes.MuncherPitEX:
    base:
      DoubleJump  # Slightly precise to land on the sand sphere. Can always add glide
      Burrow, Glide  # Might be a little _too_ precise. I guess this is among the intended strats tho?
      Launch  # Still slightly precise.

  conn LowerWastes.SandPot:
    base:
      Dash, DoubleJump OR Grapple
      Bash, Grenade=1, Grapple
      Bash, Grenade=1, DoubleJump, Glide
      Launch
  conn LowerWastes.LeverArea:
    base:
      DoubleJump
      Burrow
      Launch

area LowerWastes.LeverArea:  # (1838, -3959) At the arrow sign below the lever
  # So you may ask why this isn't part of WoodenBridge. It doesn't actually have to do with the lever, but more with the MinesEntrance area below and in particular the Health Cell. Effectively, without this area, that Health Cell would have pickup paths in three areas including EastTP and that's kinda bad.
  # This still probably wouldn't have been the choice if not for another reason: You can go through the Ruins back exit to here without a Weapon, and then have to Burrow through the ceiling, which requires this subarea to be represented without major dumb
  state LowerWastes.SandPlatformLever:
    base:
      DoubleJump
      Burrow  # Requires a vertical burrow through a vertical sand platform
      Bash, Grenade=2
      Bash, Grenade=1, Dash
      Launch

  pickup LowerWastes.BottomRightHC:
    base: free
  pickup LowerWastes.LastStandShard:
    base:  # for the puzzle, it is considered base solvable with one of doublejump, dash or burrow.
      Bash, Grenade=1, DoubleJump
      Launch, DoubleJump OR Dash OR Burrow
      LowerWastes.SandPlatformLever, DoubleJump, Dash OR Glide OR Burrow  # If the double jump is too tight this makes it free
  pickup LowerWastes.LastStandEX:
    base:
      Burrow, DoubleJump, Bash, Grenade=1
      Burrow, DoubleJump, LowerWastes.SandPlatformLever  # Requires a vertical burrow through a vertical sand platform
      Burrow, Launch
  pickup LowerWastes.MuncherClimbEX:
    base:
      DoubleJump, Grapple, Bash, Grenade=1
      LowerWastes.SandPlatformLever, DoubleJump, Grapple, Dash OR Glide OR Burrow  # If the double jump is too tight this makes it free
      Grapple, Launch

  conn LowerWastes.WoodenBridge:
    base: free
  conn LowerWastes.TreeArea:
    base:
      DoubleJump, Grapple, Bash, Grenade=1
      Grapple, Launch
      LowerWastes.SandPlatformLever, DoubleJump, Grapple, Dash OR Glide OR Burrow  # If the double jump is too tight this makes it free
      LowerWastes.SandPlatformLever, Grapple, Dash, Glide, Burrow  # This path is fun. Glide is just to make it base safe
  conn LowerWastes.MinesEntrance:
    base: EnemyObstacle, DoubleJump OR Dash OR Glide OR Grapple OR Launch
  conn LowerWastes.EastTP:
    base: Burrow

area LowerWastes.MinesEntrance:  # (1921, -4001) To the left of the lower breakable wall
  pickup LowerWastes.BottomRightEX:
    base, EnemyObstacle:
      Grapple
      Bash, Grenade=1, DoubleJump OR Dash  # Very much not a mandatory grenade... This is only important if the Ruins Wall is broken, and then only if you don't use the enemies
      Launch
  pickup LowerWastes.BottomRightHC:
    base, EnemyObstacle:
      Grapple  # Use both Grapple points
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch

  conn LowerWastes.WoodenBridge:
    base, Weapon:
      DoubleJump, Grapple
      Launch, DoubleJump OR Dash OR Grapple
  conn LowerWastes.LeverArea:
    base: Launch, Burrow, DoubleJump OR Grapple  # Realizing you can go up and not destroy the wall is kinda nontrivial if you don't see it, so only a Launch path in base
  conn WindtornRuins.LowerRuins:
    base: WindtornRuins.LowerEntrance, Burrow

area LowerWastes.TreeArea:  # (1715, -3935) The ledge right of SkeetoHive
  state LowerWastes.TrialActivation:
    base:
      Burrow, DoubleJump OR Dash OR Glide
      Burrow, Bash, Grenade=1
      DoubleJump, Bash, Grenade=2
      Dash, Bash, Grenade=4  # yes, good
      Launch
  state LowerWastes.QuestHandToHandMapstone:
    base, GladesTown.QuestHandToHandCanteen:
      DoubleJump
      Burrow
      Bash, Grenade=2  # literally never going to get used but you can do it
      Launch

  pickup LowerWastes.SkeetoHiveEX:
    base: Burrow, DoubleJump OR Dash OR Glide OR Launch
  pickup LowerWastes.LupoMap:
    base:
      Burrow
      Bash, Grenade=4  # literally never going to get used but you can do it
      Launch
  pickup LowerWastes.BurrowTree:
    base:
      DoubleJump
      Burrow
      Bash, Grenade=2  # literally never going to get used but you can do it
      Launch
  pickup LowerWastes.BurrowTreeEX:
    base: Burrow

  conn LowerWastes.Shovel:
    base: Burrow
  conn LowerWastes.UpperPath:
    base:
      Burrow, DoubleJump OR Launch
      Burrow, Bash, Grenade=1  # literally never going to get used but you can do it
      Burrow, Bash # unverified. Have to use a skeeto.
  conn LowerWastes.LeverArea:
    base:
      Grapple, Launch
      Grapple, DoubleJump, Dash  # still sort of tight

area LowerWastes.UpperPath:  # (1728, -3906) Middle of the sand to the left of UpperPath Pole
  pickup LowerWastes.UpperPathEC:
    base:
      Burrow, DoubleJump OR Dash OR Launch
      Burrow, Bash, Grenade=1
  pickup LowerWastes.UpperPathEX:
    base:
      Burrow, DoubleJump OR Dash OR Launch
      Burrow, Bash, Grenade=1, Glide  # this is absolutely a necessary path
  pickup LowerWastes.UpperPathHiddenEX:
    base: Burrow, DoubleJump OR Dash OR Launch

  conn LowerWastes.TreeArea:
    base: Burrow
  conn LowerWastes.EastTP:
    base:
      Burrow, DoubleJump OR Dash OR Launch
      Burrow, Bash, Grenade=1

area LowerWastes.EastTP: # ((1992, -3902) Location of the east teleporter
  pickup LowerWastes.EastTPOre:
    base:
      Weapon:
        Burrow OR Launch
        DoubleJump, Bash, Grenade=1
        Bash, Grenade=3  # it had to be done
  pickup LowerWastes.UpperPathHC:
    base: Burrow
  conn LowerWastes.LeverArea:
    base: Burrow
  conn LowerWastes.UpperPath:
    base: Burrow, DoubleJump OR Dash OR Launch
  conn UpperWastes.KeystoneRoom:
    base: Burrow, DoubleJump OR Dash OR Launch  # Dash is maybe probably base?

region UpperWastes:
  base:
    Danger=50, Regenerate

area UpperWastes.KeystoneRoom:  # (1900, -3831) Autosave underneath keystone door
  state UpperWastes.KeystoneDoor:
    base, Keystone=2:
      Burrow, DoubleJump OR Dash OR Glide
      Launch
  
  pickup UpperWastes.LowerKS:
    base:
      Burrow, DoubleJump OR Dash OR Glide
      Launch, DoubleJump OR Dash OR Glide
  pickup UpperWastes.UpperKS:
    base: Burrow, DoubleJump OR Dash OR Glide OR Launch
  pickup UpperWastes.TurmoilShard:
    base:  # this area seems a bit hard, not sure what intended is like.
      Bash, Burrow, DoubleJump, Dash  # intended way?
      Bash, Burrow, Launch
  pickup UpperWastes.KSDoorEX:
    base:
      Burrow, DoubleJump OR Dash OR Glide
      DoubleJump, Bash, Grenade=1
      Launch

  conn LowerWastes.EastTP:
    base: Burrow, DoubleJump OR Dash OR Glide OR Launch
  conn UpperWastes.MissilePuzzleLeft:
    base: UpperWastes.KeystoneDoor, Burrow, DoubleJump OR Dash OR Glide OR Launch

area UpperWastes.MissilePuzzleLeft:  # (1937, -3793) Immediately to the right of the sand after the keystone door
  # don't really need a state for purple wall, it can be broken from either side
  state UpperWastes.MissilePuzzleLever:  # for now, this state also means that both purple walls blocking the lever have been broken. If ways to pull the lever without breaking them are found, paths using this may have to change
    base: Bash, Burrow

  pickup UpperWastes.LedgeEC:
    base:
      Bash, Burrow, DoubleJump OR Dash
      Launch
  pickup UpperWastes.MissileSpawnEX:
    base: Burrow
  pickup UpperWastes.PurpleWallEX:
    base: Weapon, Burrow  # Putting Weapon here rather than EnemyObstacle because Launch really doesnt help you with this Gorlek.
  pickup UpperWastes.KSDoorEX:
    base: Burrow
  pickup UpperWastes.PurpleWallHC:
    base: Burrow, UpperWastes.MissilePuzzleLever

  conn UpperWastes.KeystoneRoom:
    base: UpperWastes.KeystoneDoor, Burrow
  conn UpperWastes.MissilePuzzleRight:
    base: UpperWastes.MissilePuzzleLever, Burrow

area UpperWastes.MissilePuzzleRight: # (2058, -3813) On top of sand to the right of lever gate, underneath a laser.
  pickup UpperWastes.PurpleWallEX:
    base: Burrow
  pickup UpperWastes.RoofEX:
    base:
      Burrow, DoubleJump, Bash, Grenade=1, Glide  # glide for the lasers
      Burrow, DoubleJump, Dash  # you can retry the burrow with DoubleJump, so I think this is fine
      Burrow, Launch

  conn UpperWastes.MissilePuzzleLeft:
    base: UpperWastes.MissilePuzzleLever, Burrow
  conn UpperWastes.RuinsApproach:  # this covers all connections to the pickups in the spinning lasers
    base:
      Burrow, Bash, DoubleJump, Dash OR Glide  # dash or glide to make the lasers better
      Burrow, DoubleJump, Dash  # you can retry the burrow with DoubleJump, so I think this is fine
      Burrow, Launch

area UpperWastes.NorthTP: # (2043, -3578) North Wastes teleporter
  # feels redundant but I like having the TP in a separate area to Ruins Approach, especially if we do anything with windtorn escape.
  conn UpperWastes.RuinsApproach:
    base: free

area UpperWastes.RuinsApproach:  # (2002, -3684) Left of the teleporter, on top of the sand
  state UpperWastes.QuestSelaFlowersSeed:
    base:
      Burrow, Bash, Glide, DoubleJump OR Dash  # Dash variant slightly precise if you do it without the enemies... but you can also do it using the enemies
      Burrow, Launch  # maybe Glide? I think this is fine tho
      Bash, Launch
  pickup UpperWastes.SeedQI:
    base: UpperWastes.QuestSelaFlowersSeed  # TEMPORARY - delete when quests have syntax

  pickup UpperWastes.SpinLasersRightEX:
    base: Burrow
  pickup UpperWastes.SpinLasersMiddleEX:
    base: Burrow
  pickup UpperWastes.SpinLasersLowerEX:
    base: Burrow
  pickup UpperWastes.RoofEX:
    base:
      Burrow, DoubleJump, Bash, Grenade=1
      Burrow, DoubleJump, Dash OR Glide
      Burrow, Launch
    advanced:
      Dash, Bash  # seemed kinda difficult to get past the spikes without doublejump
  pickup UpperWastes.WallOre:
    base:
      Burrow, Bash, DoubleJump, Dash OR Glide
      Burrow, Bash, Dash, Glide  # Slightly tight getting across to the sand pit but pretty easily doable. Semi precise angle on the burrow but with glide its easy to reattempt
      Bash, Launch, DoubleJump OR Dash OR Glide OR Burrow
      Burrow, Launch, DoubleJump OR Glide

  conn UpperWastes.MissilePuzzleRight:
    base: Burrow, DoubleJump OR Launch
  conn WindtornRuins.UpperRuinsDoor:
    base, UpperDepths.MoraDefeated, WestPools.KwolokDefeated, LowerReach.WispCollected:
      Bash, Launch
      Burrow, Launch, DoubleJump OR Glide  # djump or glide lets you reattempt
      Burrow, Bash, DoubleJump, Dash OR Glide
      Burrow, Bash, Dash, Glide  # Slightly tight getting across to the sand pit but pretty easily doable. Semi precise angle on the burrow but with glide its easy to reattempt

area WindtornRuins.UpperRuinsDoor:  # (2200, -3828) Just inside the door.
  state WindtornRuins.RuinsLever:
    base: Burrow, Weapon
  state WindtornRuins.HeartBarrier:  # These are paths to go to the teleporter and break the heart. But they can't originate from the teleporter area because after you broke the heart, you can't go to the teleporter again, which makes these paths not viable as connections to the teleporter. These paths are just about breaking the heart, so it doesn't matter if the paths can lock you out of the teleporter if you already have broken the heart, because then you have already broken the heart.
    base, WindtornRuins.RuinsLever, Weapon:
      Burrow, DoubleJump OR Dash OR Glide OR Launch
      Burrow, Bash, Grenade=1

  pickup UpperWastes.SeedQI: free
  pickup UpperWastes.WallOre:
    base:
      Bash, Grenade=1, Glide
      Launch, DoubleJump OR Glide

  conn UpperWastes.RuinsApproach:  # you don't really need anything, but the freefall is awkward and the area home is on top of a wall... These are more realistic cases than the complete list of possibilities
    base: Bash OR Glide OR Burrow OR Launch
  conn WindtornRuins.RuinsTP:  # connection FROM entrance TO tp at ANY TIME
    # this accounts for both situations of having broken the heart or not
    base, WindtornRuins.RuinsLever:
      Burrow, Dash, DoubleJump
      Burrow, DoubleJump, Glide
      Burrow, Bash, Grenade=1, Glide
      Burrow, Launch
  conn WindtornRuins.Escape:  # connection FROM entrance TO escape to support future paths of breaking the heart without reaching the teleporter
    base: WindtornRuins.RuinsLever, WindtornRuins.HeartBarrier, Burrow
  conn WindtornRuins.LowerRuins:  # connection FROM entrance TO lower AFTER escape
    # if you completed the escape, there's a gap in the floor that you have to cross, but Burrow alone is enough to do so
    # Since Burrow solves this connection, it accounts for all paths to the escape revisit pickup
    base: WindtornRuins.RuinsLever, WindtornRuins.HeartBarrier, WindtornRuins.EscapeComplete, Burrow

area WindtornRuins.RuinsTP:  # (2130, -3984) Windtorn Ruins teleporter.
  state WindtornRuins.HeartBarrier:  # Barrier next to the teleporter that stops you from getting the Heart.
    base: Weapon

  conn WindtornRuins.Escape:  # connection FROM tp TO escape
    # the gap after completing the escape locks you out of these paths, but it doesn't matter because they're only relevant for completing the uncompleted escape
    base: WindtornRuins.HeartBarrier
  conn WindtornRuins.LowerRuins:  # connection FROM tp TO lower ruins AFTER escape
    # if you completed the escape, there's a gap in the floor that you have to cross
    # Since Burrow solves this connection, it accounts for all paths to the escape revisit pickup
    base, WindtornRuins.HeartBarrier, WindtornRuins.EscapeComplete:
      DoubleJump OR Dash OR Glide OR Burrow OR Launch
      Bash, Grenade=1  # yes, this needs a bashgrenade path
  conn WindtornRuins.UpperRuinsDoor:
    base, WindtornRuins.RuinsLever:
      # these account for both situations of having broken the heart or not
      Burrow, Bash, Grenade=1, DoubleJump OR Dash
      Burrow, Glide, DoubleJump OR Dash
      Burrow, Launch
      # these make you able to break the Heart and then use the resulting terrain
      Weapon, Burrow, Bash, Grenade=1
      Weapon, Glide

area WindtornRuins.Escape:  # (2015, -4027) Where the escape starts 
  # (yes, this has to exist apparently, because you can access the escape from all the different anchors in ruins)
  # After you complete the escape, there's a gap in the floor to its right, making the location unreachable with skillsets
  # that would have reached it before completing the escape. That's why this has no outside connections; the paths to here 
  # can softlock after achieving the EscapeComplete state, so this area is only safe as long as it does nothing else than handling that state.
  state WindtornRuins.EscapeComplete:  # Skills needed to complete the escape. Might have to add a pickup later
    base, WindtornRuins.HeartBarrier:
      Burrow, Dash, Grapple, DoubleJump OR Glide
      Burrow, DoubleJump, Glide, Grapple  # I think this is fine?
      Burrow, DoubleJump, Launch, Dash OR Glide
      Burrow, Grapple, Launch, Glide

area WindtornRuins.LowerRuins:  # (1969, -4023) At the ancient map pedestal
  # requires escape to be done
  state WindtornRuins.QuestHandToHandMapPedestal:
    base: LowerWastes.QuestHandToHandMapstone
  state WindtornRuins.LowerEntrance: # State for back entrance to be open
    base: Burrow, Weapon

  pickup WindtornRuins.EscapeRevisitEC:
    base: WindtornRuins.EscapeComplete, Burrow
  conn WindtornRuins.Escape: free  # walk over the invisible sandworm
  conn WindtornRuins.RuinsTP:
    base, WindtornRuins.HeartBarrier, WindtornRuins.EscapeComplete:
      Burrow, Dash, DoubleJump
      Burrow, DoubleJump, Glide
      Burrow, Bash, Glide, Grenade=2
      Launch
  # connection to upper should be redundant with the conn to tp?

  conn LowerWastes.MinesEntrance:
    base: Burrow, Weapon

region WeepingRidge:
  base:
    Danger=60, Regenerate

area WeepingRidge.Bottom: # (1162, -3818) Just to the right of where the elevator starts
  state WeepingRidge.ElevatorFightCompleted:
    base: Combat, ShieldEnemy, Dash OR Bash

  conn WeepingRidge.LaunchArea:
    base: WeepingRidge.ElevatorFightCompleted

area WeepingRidge.LaunchArea:  # (1191, -3716) After the portal at the top of the elevator
  pickup WeepingRidge.LaunchTree:
    base:
      Glide
      Launch, Bash OR DoubleJump OR Dash
    advanced:
      Launch                    # this could not. it's tricky!
      Bash, DoubleJump, Dash    # requires bash gliding (validation note: it does not oriThink... maybe base even?)
  pickup WeepingRidge.PortalEX:
    base:
      Launch, Glide OR Bash OR DoubleJump OR Dash
    advanced:
      Launch
  pickup WeepingRidge.SpikeClimbEX:
    base:
      Launch, Glide OR Bash OR DoubleJump OR Dash
    advanced:
      Launch
  pickup WeepingRidge.Ore:
    base:
      Launch, DoubleJump OR Bash
    advanced:
      Launch
      Bash, Glide              # fuck with the elemental until he gives you a shot to bash

  conn WillowsEnd.Entry:
    base:
      WeepingRidge.ElevatorFightCompleted, Launch, DoubleJump, Dash OR Glide
    advanced:
      WeepingRidge.ElevatorFightCompleted, Launch, DoubleJump OR Glide OR Dash # you really only NEED one of the 3 of em
  # backwards connection would be meaningless

# BEGIN unvalidated willow's end region
region WillowsEnd:
  base:
    Danger=60, Regenerate # need at least 6 health and Regen to do ANYTHING in willow

area WillowsEnd.Entry:  # (495, -3950) At the lower door
  state WillowsEnd.TrapHeart:
    base:
      Weapon, RangedWeapon, Launch, DoubleJump, Dash

  state WillowsEnd.GrappleWheelsHeart:
    base, Weapon:
      Grapple, Launch, DoubleJump, Dash
      Grapple, Launch, Glide

  pickup WillowsEnd.SpikesOre:
    base:
      Launch, Dash OR Glide
  pickup WillowsEnd.EntryEX:
    base:
      DoubleJump, Bash, Grenade=2
      Launch
  pickup WillowsEnd.PoisonfallHC:
    base:
      Grapple, Launch, DoubleJump, Dash
      Grapple, Launch, Glide
      WillowsEnd.GrappleWheelsHeart, DoubleJump, Bash, Grenade=2, Dash OR Glide
      WillowsEnd.GrappleWheelsHeart, Launch

  conn WillowsEnd.InnerTP:
    base:
      Launch, Bash, DoubleJump OR Dash OR Glide  # mine in the way, but I think it's managable

area WillowsEnd.InnerTP:  # (421, -3864) The teleporter inside
  pickup WillowsEnd.LupoMap:
    base:
      DoubleJump OR Dash OR Launch OR RangedWeapon

  conn WillowsEnd.Entry:
    base:
      Weapon  # open the portal shortcut
      DoubleJump, Dash
      Glide OR Launch
  conn WillowsEnd.East:
    base:
      DoubleJump, Bash, Grenade=1, Dash OR Glide
      Launch, DoubleJump OR Dash

area WillowsEnd.East:  # (547, -3804) To the left of the redirect puzzle
  state WillowsEnd.RedirectHeart:
    base: Weapon, DoubleJump, Bash, Launch

  pickup WillowsEnd.RedirectEX:
    base:
      Weapon, Bash, Launch, DoubleJump OR Dash OR Glide
      Bash, Grenade=1, Launch

  conn WillowsEnd.InnerTP:
    base:
      EnemyObstacle, Glide
      Bash, DoubleJump, Dash
      Launch, DoubleJump OR Dash OR Bash
  conn WillowsEnd.Upper:
    base: Bash, Launch  # some other paths would be possible, but with how far back the last checkpoint is...

area WillowsEnd.West:  # (445, -3839) To the left of the one-way above Lupo
  state WillowsEnd.SpinLasersHeart:
    base: Weapon, Launch, DoubleJump OR Dash OR Glide
  state WillowsEnd.GlideHeart:
    base: Weapon, DoubleJump, Glide, Launch  # technically easy dboost without djump, but you already take so much damage in this place...

  pickup WillowsEnd.WindSpinOre:
    base: DoubleJump, Glide, Launch

  conn WillowsEnd.InnerTP:
    base: Weapon
  conn WillowsEnd.Upper:
    base, Weapon:
      Bash, Grenade=1, DoubleJump OR Dash OR Glide
      Launch

area WillowsEnd.Upper:  # (515, -3745) At the upper door
  state WillowsEnd.ElementalDefeated:
    base: Combat, Danger=25, DoubleJump, Bash, Launch  # +60 region danger
  state WillowsEnd.BurrowHeart:
    base, Weapon:
      Burrow, DoubleJump, Dash, Bash, Grapple, Glide
      Burrow, Bash, Grapple, Launch, DoubleJump OR Glide
  state WillowsEnd.SpinPortalsHeart:
    base, Weapon:
      Bash, Grapple, Launch, DoubleJump, Dash
      Bash, Grapple, Launch, Glide

  pickup WillowsEnd.UpperLeftEX:
    base: Grapple, Launch, DoubleJump OR Dash OR Glide
  pickup WillowsEnd.UpperRightEX:
    base:
      Bash, Grapple, Launch, DoubleJump, Dash
      Bash, Grapple, Launch, Glide

  conn WillowsEnd.East:
    base: EnemyObstacle, DoubleJump OR Dash OR Bash OR Glide OR Launch
  conn WillowsEnd.West:
    base: Launch

area WillowsEnd.OuterTP:  # (554, -3609) The teleporter before Shriek
  conn WillowsEnd.Upper: free


# END unvalidated willow's end region

area TwillenShop:
  state GladesTown.QuestRawShard:
    base: LowerWastes.QuestEerieGem

  pickup TwillenShop.Overcharge:
    base: SpiritLight=400
  pickup TwillenShop.Wingclip:
    base: SpiritLight=400
  pickup TwillenShop.Swap:
    base: SpiritLight=400
  pickup TwillenShop.Vitality:
    base: SpiritLight=400
  pickup TwillenShop.Energy:
    base: SpiritLight=400
  pickup TwillenShop.Finesse:
    base: SpiritLight=400
  pickup TwillenShop.TripleJump:
    base: GladesTown.EntryWallBroken, SpiritLight=400
  pickup TwillenShop.LightHarvest:
    base: GladesTown.EntryWallBroken, SpiritLight=400

area OpherShop:
  pickup OpherShop.Spike:
    base: SpiritLight=400
  pickup OpherShop.SpiritSmash:
    base: SpiritLight=400
  pickup OpherShop.SpiritStar:
    base: SpiritLight=400
  pickup OpherShop.Blaze:
    base: SpiritLight=400
  pickup OpherShop.Sentry:
    base: SpiritLight=400
  pickup OpherShop.Teleport:
    base: GladesTown.EntryWallBroken, SpiritLight=400
  pickup OpherShop.WaterBreath:
    base: Water, EastHollow.Voice, SpiritLight=400 # what this actually needs is water + the ability to talk to kwolok

area TuleyShop:
  state TuleyShop.QuestLastTreeBranchRejected:  # written out the steps in case they give pickups
    base: WoodsEntry.QuestLastTreeBranch
  
  state TuleyShop.QuestSelaFlowers:
    base: UpperWastes.QuestSelaFlowersSeed
  state TuleyShop.QuestStickyGrass:
    base: EastPools.QuestStickyGrassSeed
  state TuleyShop.QuestLightcatchers:
    base: UpperDepths.QuestLightcatchersSeed
  state TuleyShop.QuestBlueMoon:
    base: InnerWellspring.QuestBlueMoonSeed
  state TuleyShop.QuestSpringPlants:
    base: UpperReach.QuestSpringPlantsSeed
  state TuleyShop.QuestLastTree:
    base: WoodsEntry.QuestLastTreeSeed


# do not delete the newline at the end of the file
